<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Pd Documentation</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="pdmanual.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Pd Documentation</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#guide-to-the-documentation"><span class="toc-section-number">1.1</span> Guide to the Documentation</a></li>
<li><a href="#other-resources"><span class="toc-section-number">1.2</span> Other Resources</a></li>
</ul></li>
<li><a href="#theory-of-operation"><span class="toc-section-number">2</span> Theory of Operation</a><ul>
<li><a href="#overview"><span class="toc-section-number">2.1</span> Overview</a><ul>
<li><a href="#the-main-window-canvases-and-printout"><span class="toc-section-number">2.1.1</span> The Main Window, Canvases, and Printout</a></li>
<li><a href="#object-boxes"><span class="toc-section-number">2.1.2</span> Object Boxes</a></li>
<li><a href="#message-and-gui-boxes"><span class="toc-section-number">2.1.3</span> Message and GUI Boxes</a></li>
<li><a href="#patches-and-files"><span class="toc-section-number">2.1.4</span> Patches and Files</a></li>
</ul></li>
<li><a href="#editing-pd-patches"><span class="toc-section-number">2.2</span> Editing Pd Patches</a><ul>
<li><a href="#edit-and-run-mode"><span class="toc-section-number">2.2.1</span> Edit and Run Mode</a></li>
<li><a href="#creating-boxes"><span class="toc-section-number">2.2.2</span> Creating Boxes</a></li>
<li><a href="#the-selection"><span class="toc-section-number">2.2.3</span> The Selection</a></li>
<li><a href="#deleting-cutting-and-pasting"><span class="toc-section-number">2.2.4</span> Deleting, Cutting, and Pasting</a></li>
<li><a href="#changing-the-text"><span class="toc-section-number">2.2.5</span> Changing the Text</a></li>
<li><a href="#connecting-and-disconnecting-boxes"><span class="toc-section-number">2.2.6</span> Connecting and Disconnecting Boxes</a></li>
<li><a href="#popup-menu-for-properties-open-and-help"><span class="toc-section-number">2.2.7</span> Popup Menu for Properties, Open, and Help</a></li>
<li><a href="#miscellaneous"><span class="toc-section-number">2.2.8</span> Miscellaneous</a></li>
</ul></li>
<li><a href="#messages"><span class="toc-section-number">2.3</span> Messages</a><ul>
<li><a href="#anatomy-of-a-message"><span class="toc-section-number">2.3.1</span> Anatomy of a Message</a></li>
<li><a href="#depth-first-message-passing"><span class="toc-section-number">2.3.2</span> Depth First Message Passing</a></li>
<li><a href="#hot-and-cold-inlets-and-right-to-left-outlet-order"><span class="toc-section-number">2.3.3</span> Hot and Cold Inlets and Right to Left Outlet Order</a></li>
<li><a href="#message-boxes"><span class="toc-section-number">2.3.4</span> Message Boxes</a></li>
</ul></li>
<li><a href="#audio-signals"><span class="toc-section-number">2.4</span> Audio Signals</a><ul>
<li><a href="#sample-rate-and-format"><span class="toc-section-number">2.4.1</span> Sample Rate and Format</a></li>
<li><a href="#tilde-objects-and-audio-connections"><span class="toc-section-number">2.4.2</span> Tilde Objects and Audio Connections</a></li>
<li><a href="#converting-audio-to-and-from-messages"><span class="toc-section-number">2.4.3</span> Converting Audio to and from Messages</a></li>
<li><a href="#switching-and-blocking"><span class="toc-section-number">2.4.4</span> Switching and Blocking</a></li>
<li><a href="#nonlocal-signal-connections"><span class="toc-section-number">2.4.5</span> Nonlocal Signal Connections</a></li>
</ul></li>
<li><a href="#scheduling"><span class="toc-section-number">2.5</span> Scheduling</a><ul>
<li><a href="#audio-and-messages"><span class="toc-section-number">2.5.1</span> Audio and Messages</a></li>
<li><a href="#computation-load"><span class="toc-section-number">2.5.2</span> Computation Load</a></li>
<li><a href="#determinism"><span class="toc-section-number">2.5.3</span> Determinism</a></li>
</ul></li>
<li><a href="#semantics"><span class="toc-section-number">2.6</span> Semantics</a><ul>
<li><a href="#creation-of-objects"><span class="toc-section-number">2.6.1</span> Creation of Objects</a></li>
<li><a href="#persistence-of-data"><span class="toc-section-number">2.6.2</span> Persistence of Data</a></li>
<li><a href="#message-passing"><span class="toc-section-number">2.6.3</span> Message Passing</a></li>
<li><a href="#inlets-and-lists"><span class="toc-section-number">2.6.4</span> Inlets and Lists</a></li>
<li><a href="#dollar-signs"><span class="toc-section-number">2.6.5</span> Dollar Signs</a></li>
</ul></li>
<li><a href="#subpatches"><span class="toc-section-number">2.7</span> Subpatches</a><ul>
<li><a href="#abstractions"><span class="toc-section-number">2.7.1</span> Abstractions</a></li>
<li><a href="#graph-on-parent-subpatches"><span class="toc-section-number">2.7.2</span> Graph-on-parent Subpatches</a></li>
</ul></li>
<li><a href="#numeric-arrays"><span class="toc-section-number">2.8</span> Numeric Arrays</a></li>
<li><a href="#data-structures"><span class="toc-section-number">2.9</span> Data Structures</a><ul>
<li><a href="#traversal"><span class="toc-section-number">2.9.1</span> Traversal</a></li>
<li><a href="#accessing-and-changing-data"><span class="toc-section-number">2.9.2</span> Accessing and Changing Data</a></li>
<li><a href="#editing"><span class="toc-section-number">2.9.3</span> Editing</a></li>
<li><a href="#limitations"><span class="toc-section-number">2.9.4</span> Limitations</a></li>
</ul></li>
</ul></li>
<li><a href="#getting-pd-to-run"><span class="toc-section-number">3</span> Getting Pd to Run</a><ul>
<li><a href="#audio-and-midi"><span class="toc-section-number">3.1</span> Audio and MIDI</a></li>
<li><a href="#installing-pd-in-microsoft-windows"><span class="toc-section-number">3.2</span> Installing Pd in Microsoft Windows</a></li>
<li><a href="#installing-pd-in-linux"><span class="toc-section-number">3.3</span> Installing Pd in Linux</a></li>
<li><a href="#installing-pd-in-macos"><span class="toc-section-number">3.4</span> Installing Pd in macOS</a></li>
<li><a href="#preferences-and-startup-options"><span class="toc-section-number">3.5</span> Preferences and Startup Options</a><ul>
<li><a href="#command-line-arguments"><span class="toc-section-number">3.5.1</span> Command Line Arguments</a></li>
</ul></li>
<li><a href="#how-pd-searches-for-files"><span class="toc-section-number">3.6</span> How Pd Searches for Files</a></li>
</ul></li>
<li><a href="#writing-pd-objects-in-c"><span class="toc-section-number">4</span> Writing Pd Objects in C</a></li>
<li><a href="#current-status"><span class="toc-section-number">5</span> Current Status</a><ul>
<li><a href="#release-notes"><span class="toc-section-number">5.1</span> Release Notes</a><ul>
<li><a href="#section">0.48-0</a></li>
<li><a href="#section-1">0.47-1</a></li>
<li><a href="#section-2">0.47-0</a></li>
<li><a href="#section-3">0.46-7</a></li>
<li><a href="#section-4">0.46-6</a></li>
<li><a href="#section-5">0.46-5</a></li>
<li><a href="#section-6">0.46-4</a></li>
<li><a href="#section-7">0.46-3</a></li>
<li><a href="#section-8">0.46-2</a></li>
<li><a href="#section-9">0.46-1</a></li>
<li><a href="#section-10">0.46-0</a></li>
<li><a href="#section-11">0.45-3</a></li>
<li><a href="#section-12">0.45-1,2</a></li>
<li><a href="#section-13">0.45</a></li>
<li><a href="#section-14">0.44-3</a></li>
<li><a href="#section-15">0.44-2</a></li>
<li><a href="#section-16">0.44-1</a></li>
<li><a href="#section-17">0.44</a></li>
<li><a href="#section-18">0.43.2-3</a></li>
<li><a href="#section-19">0.43.1</a></li>
<li><a href="#section-20">0.43</a></li>
<li><a href="#section-21">0.42-5</a></li>
<li><a href="#section-22">0.42-4</a></li>
<li><a href="#section-23">0.42.1-3</a></li>
<li><a href="#section-24">0.42</a></li>
<li><a href="#section-25">0.41-3,4</a></li>
<li><a href="#section-26">0.41-2</a></li>
<li><a href="#section-27">0.41-1</a></li>
<li><a href="#section-28">0.41</a></li>
<li><a href="#section-29">0.40-1</a></li>
<li><a href="#section-30">0.40</a></li>
<li><a href="#section-31">0.39.2</a></li>
<li><a href="#section-32">0.39.1</a></li>
<li><a href="#section-33">0.39.0</a></li>
<li><a href="#section-34">0.38.1</a></li>
<li><a href="#section-35">0.38.0</a></li>
<li><a href="#section-36">0.37.3</a></li>
<li><a href="#section-37">0.37.2</a></li>
<li><a href="#section-38">0.37.1</a></li>
<li><a href="#section-39">0.37</a></li>
<li><a href="#test-1">0.37-test 1</a></li>
<li><a href="#section-40">0.36-1</a></li>
<li><a href="#section-41">0.36</a></li>
<li><a href="#section-42">0.35</a></li>
<li><a href="#section-43">0.34.3</a></li>
<li><a href="#section-44">0.34.2</a></li>
<li><a href="#section-45">0.34.1</a></li>
<li><a href="#section-46">0.34</a></li>
<li><a href="#section-47">0.33</a></li>
<li><a href="#patch-6">0.32 PATCH 6</a></li>
<li><a href="#patch-5">0.32 PATCH 5</a></li>
<li><a href="#patch-2-3-4">0.32 PATCH 2, 3, 4</a></li>
<li><a href="#patch-1">0.32 PATCH 1</a></li>
<li><a href="#section-48">0.32</a></li>
<li><a href="#section-49">0.31</a></li>
<li><a href="#section-50">0.30</a></li>
<li><a href="#section-51">0.29</a></li>
<li><a href="#section-52">0.28</a></li>
<li><a href="#section-53">0.27</a></li>
<li><a href="#section-54">0.26</a></li>
<li><a href="#section-55">0.25</a></li>
<li><a href="#section-56">0.24</a></li>
<li><a href="#section-57">0.23</a></li>
<li><a href="#section-58">0.22</a></li>
<li><a href="#section-59">0.21</a></li>
<li><a href="#section-60">0.20</a></li>
<li><a href="#section-61">0.19</a></li>
<li><a href="#section-62">0.18</a></li>
<li><a href="#section-63">0.12 - 0.17</a></li>
<li><a href="#section-64">0.11</a></li>
<li><a href="#section-65">0.10</a></li>
<li><a href="#section-66">0.09</a></li>
<li><a href="#section-67">0.08</a></li>
<li><a href="#section-68">0.07</a></li>
<li><a href="#section-69">0.06</a></li>
<li><a href="#section-70">0.05</a></li>
<li><a href="#section-71">0.04</a></li>
<li><a href="#section-72">0.03</a></li>
<li><a href="#section-73">0.02</a></li>
<li><a href="#section-74">0.01</a></li>
</ul></li>
<li><a href="#known-bugs"><span class="toc-section-number">5.2</span> Known Bugs</a></li>
<li><a href="#differences-from-maxmsp"><span class="toc-section-number">5.3</span> Differences From Max/MSP</a></li>
</ul></li>
</ul>
</nav>
<p>This is the HTML documentation for Pd, a patchable environment for audio analysis, synthesis, and processing, with a rich set of multimedia capabilities. The latest version of this page can be found at: <a href="http://msp.ucsd.edu/software.html" class="uri">http://msp.ucsd.edu/software.html</a>.</p>
<hr />
<h1 id="introduction"><span class="header-section-number">1</span> Introduction</h1>
<p><a href="#TOC">back to table of contents</a></p>
<p>This is the HTML documentation for the Pd computer program. Pd is free and can be downloaded from the internet; go to <a href="http://msp.ucsd.edu/software.html" class="uri">http://msp.ucsd.edu/software.html</a> to get it.</p>
<h2 id="guide-to-the-documentation"><span class="header-section-number">1.1</span> Guide to the Documentation</h2>
<p>Pd’s documentation consists of:</p>
<ul>
<li>this HTML manual</li>
<li>“reference” patches, one for each kind of object in Pd</li>
<li>“example” patches showing how to do things</li>
<li>sample C code</li>
</ul>
<p>This manual has five sections:</p>
<ol type="1">
<li>this overview</li>
<li><a href="#theory-of-operation">a theory of operations, explaining how Pd works</a></li>
<li><a href="#getting-pd-to-run">instructions on installing Pd and getting it to run</a></li>
<li><a href="#writing-pd-objects-in-c">how to write C extensions to Pd</a></li>
<li><a href="#current-status">release notes and known bugs</a></li>
</ol>
<p>For a list of all the objects you can use in Pd, see the text file, “0.INTRO.txt” in the directory, “../5.reference”. To get help on any Pd object you can right click on it; or you can browse the help patches by choosing “Browser…” in the Pd help menu and looking in 5.reference.</p>
<p>The example patches are also available from the “Browser…” item in Pd’s “help” menu. They appear in subdirectories named “2.control.examples”, “3.audio.examples” and “4.fft.examples.” Some additional patches in “7.stuff” might also be helpful.</p>
<p>To get started writing your own C extensions, refer to chapter 4 of this manual.</p>
<h2 id="other-resources"><span class="header-section-number">1.2</span> Other Resources</h2>
<p>There is a very extensive Pd community web site, <a href="http://puredata.info">puredata.info</a>, which aims to be the central resource for Pd, from documentation and downloads; to forums, member pages, and a patch exchange.</p>
<p>More documentation is available on the Pd FLOSS site: <a href="http://en.flossmanuals.net/PureData/" class="uri">http://en.flossmanuals.net/PureData/</a> (English) and <a href="http://fr.flossmanuals.net/PureData" class="uri">http://fr.flossmanuals.net/PureData</a> (French).</p>
<p>Most of the interesting news related to Pd shows up on the Pd mailing list, maintained by IOhannes Zmoelnig. To subscribe or browse the archives visit: <a href="http://iem.at/mailinglists/pd-list/" class="uri">http://iem.at/mailinglists/pd-list/</a>. This is the best source of recent information regarding installation problems and bugs. It is perfectly reasonable to post “beginner” questions on this list; alternatively you can contact msp@ucsd.edu for help.</p>
<p>Many extensions to Pd are announced on the mailing list. In particular, for people interested in graphics, there is a 3D graphics rendering package, named GEM, based on OpenGL, written by Mark Danks, adapted to Linux by Guenter Geiger, and now maintained by Iohannes Zmoelnig. You can get it from: <a href="http://gem.iem.at/" class="uri">http://gem.iem.at/</a>, or by installing Pd Extended.</p>
<p>Here are some more <a href="http://msp.ucsd.edu/external-links.htm">external links</a>.</p>
<hr />
<h1 id="theory-of-operation"><span class="header-section-number">2</span> Theory of Operation</h1>
<p><a href="#TOC">back to table of contents</a></p>
<p>The purpose of this chapter is to describe Pd’s design and how it is supposed to work. Practical details about how to obtain, install, and run Pd are described in the <a href="#getting-pd-to-run">next chapter</a>. Links to more extensive guidaes (and to more theoretical information about computer music) can be found in the <a href="#introduction">previous chapter</a>.</p>
<h2 id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>Pd is a real-time graphical programming environment for audio and graphical processing. It resembles the Max/MSP system but is much simpler and more portable; also Pd has two features not (yet) showing up in Max/MSP: first, via Mark Dank’s GEM package, Pd can be used for simultaneous computer animation and computer audio. Second, an experimental facility is provided for defining and accessing data structures.</p>
<h3 id="the-main-window-canvases-and-printout"><span class="header-section-number">2.1.1</span> The Main Window, Canvases, and Printout</h3>
<p>When Pd is running, you’ll see a main “Pd” window, and possibly one or more “canvases” or “patches”. The main Pd window looks like this:</p>
<figure>
<img src="fig1.1.png" alt="pd window" /><figcaption>pd window</figcaption>
</figure>
<p>There are peak level and clip indicators for audio input and output; these report peak levels over all input and all output channels. Note that DC shows up as an input level; many cards have DC levels which show up in the 50s. To see an RMS audio level, select “test audio and MIDI” from the Media menu. The main window display is intended only to help you avoid clipping on input and output. You can turn the peak meters on and off using the control at lower left.</p>
<p>At lower right is a control to turn audio processing on and off globally. Turning audio off stops the computation and relinquishes any audio devices Pd is using. The “Media” menu is also provided, with accelerators “Control-.” to turn audio computation off and “Control-/” to turn it on. When audio is on, Pd is computing audio samples in real time according to whatever patches you have open (whether they are visible or not).</p>
<p>The DIO (Digital I/O) error indicator flashes if there is a synchronization error for audio input or output. (But note that on some platforms Pd doesn’t find out about them. If you never see red, you’re probably not seeing the truth.) Click the “DIO errors” button to see a list of recent errors. This indicator should turn red whenever the computation runs late (so that the DAC FIFOs fill and/or the ADC FIFOs empty) or if audio input and output are not running at the same rate. See <a href="#audio-and-midi">Audio and MIDI</a> support.</p>
<p>The bottom part of the Pd window is an area for printout from objects in patches, and/or for messages from Pd itself.</p>
<p>Pd documents are called “patches” or “canvases.” Each open document has one main window and any number of sub-windows. The sub-windows can be opened and closed but are always running whether you can see them or not. Here is a simple Pd patch:</p>
<figure>
<img src="fig1.2.jpg" alt="hello world patch" /><figcaption>hello world patch</figcaption>
</figure>
<p>There are four <em>text boxes</em> in this patch: a number box (showing zero), an object box showing “print,” and two comments. The number box and the object box are connected, the number box’s output to the print box’s input. Boxes may have zero or more inputs and/or outputs, with the inputs on top and the outputs on bottom.</p>
<p>Pd’s printout appears on the main “Pd” window, unless you redirect it elsewhere.</p>
<h3 id="object-boxes"><span class="header-section-number">2.1.2</span> Object Boxes</h3>
<p>Pd patches can have four types of boxes: <em>object, message, GUI,</em> and <em>comment</em> .</p>
<p>You make <em>objects</em> by typing text into object boxes. The text is divided into <em>atoms</em> separated by white space. The first atom specifies what type of object Pd will make, and the other atoms, called <em>creation arguments</em> , tell Pd how to initialize the object. If you type for example,</p>
<figure>
<img src="fig1.3.jpg" alt="object" /><figcaption>object</figcaption>
</figure>
<p>the “+” specifies the <em>class</em> of the object. In this case the object will be the kind that carries out addition, and the “13” initializes the amount to add.</p>
<p>Atoms are either numbers or <em>symbols</em> like “+”. Anything that is not a valid number is considered a symbol. Valid numbers may or may not have a decimal point (for instance, 12, 15.6, -.456), or may be written in exponential notation (such as “4.5e6”, which means “4.5 multiplied by 10 six times, i.e., 4500000). Negative exponentials divide by 10 (so that 1.23e-5 comes to 0.0000123).</p>
<p>Non-valid numbers which are read as symbols include things like “+5” and “0..6” as well as words and names such as “Zack” or “cat”. The symbols “gore”, “Gore”, and “GORE” are all distinct.</p>
<p>The text you type into an object box determines how many and what kinds of inlets and outlets the object will have. Some classes (like “+” always have a fixed arrangement of inlets and outlets, and in the case of other classes, the inlets and outlets will depend on the creation arguments.</p>
<p>Here for example is a simple MIDI synthesizer:</p>
<figure>
<img src="fig1.4.png" alt="simple MIDI synthesizer" /><figcaption>simple MIDI synthesizer</figcaption>
</figure>
<p>This patch mixes <em>control</em> objects (notein, stripnote, and ftom) with <em>tilde</em> objects osc~, *~, and dac~. The control objects carry out their function sporadically, as a result of one or more type of <em>event</em> . In this case, incoming MIDI note messages set off the control computation. The result of the computation is, when the note happens to be a “note on” (and not a “note off”, to compute the frequency in cycles per second and pass it on to the oscillator (“osc~”).</p>
<p>The second half of the patch, the osc~, *~, and dac~ objects, compute audio samples, in the same way as an analog synthesizer works. The osc~ object is acting as the interface between the two regimes, in that it takes control messages to set its frequency but talks to “*~” using an audio signal. Audio signals aren’t sporadic; they are continuous streams of numbers. As a result tilde objects act under very different rules from control objects. The audio portion of the patch is always running, whether MIDI messages arrive or not. On the other hand, the function of control computations is to insert calculations between the audio computation which may change audio computation parameters such as the frequency of an oscillator.</p>
<p>The connections in the patch (the lines between the boxes) are also of two types: control and signal. The type of connection depends on the outlet it comes from. Signal connections are represented by thicker lines than control connections; in the patch above, the two bottom connections are signal and the others are control. In general, a control connection may be made to a signal inlet; if numbers are sent over it they are automatically converted to signals. Signal connections may not be made to control inlets; some sort of explicit conversion must be specified.</p>
<h3 id="message-and-gui-boxes"><span class="header-section-number">2.1.3</span> Message and GUI Boxes</h3>
<p>The border of a box tells you how its text is interpreted and how the box functions. Object boxes (as in the previous example) use the text to create objects when you load a patch or type text onto a new one. If you retype the text in an object box, the old one is discarded and a new one is created, using the new creation arguments. The contents of an object box describe a message which is sent to Pd to create the object.</p>
<p><em>Message</em> boxes interpret the text as a message to send whenever the box is activated (by an incoming message or with the mouse.) The message may be sent many times while the patch is running (as opposed to object boxes whose message is used once to create the object). Instead of going straight to Pd, the message box’s message (or messages) go either to the box’s outlet or to other specified receiving objects. In the example below, the message box, when clicked, sends the message “21” to an object box which adds 13 to it.</p>
<figure>
<img src="fig1.5.jpg" alt="[message( –&gt; [object] -&gt; [number]" /><figcaption>[message( –&gt; [object] -&gt; [number]</figcaption>
</figure>
<p>The third box shown is a <em>GUI</em> (“graphical user interface”) box. GUI boxes come in many forms including number boxes (as in this example), toggles, sliders, and so on. Whereas the appearance of an object or message box is static when a patch is running, a number box’s contents (the text) changes to reflect the current value held by the box. You can also use a number box as a control by clicking and dragging up and down, or by typing values in it. (There are also shift- and alt-click actions; see <a href="#popup-menu-for-properties-open-and-help">Popup Menu for Properties, Open, and Help</a> to find out how to look this up.)</p>
<p>You can also create a “symbol” box which is like a number box but deals in symbols like “cat.” You can type your own strings in (followed by “enter”) or use it to display strings which arrive as messages to its inlet.</p>
<h3 id="patches-and-files"><span class="header-section-number">2.1.4</span> Patches and Files</h3>
<p>When you save a patch to a file, Pd doesn’t save the entire state of all the objects in the patch, but only what you see: the objects’ creation arguments and their interconnections. Certain data-storage objects have functions for reading and writing other files to save and restore their internal state.</p>
<p>Pd finds files using a <em>path</em> which can be specified as part of Pd’s startup arguments. The path specifies one or more directories, separated by colons (semicolons if you’re using windows.) Most objects which can read files search for them along the search path, but when Pd writes files they go to the directory where the patch was found.</p>
<h2 id="editing-pd-patches"><span class="header-section-number">2.2</span> Editing Pd Patches</h2>
<h3 id="edit-and-run-mode"><span class="header-section-number">2.2.1</span> Edit and Run Mode</h3>
<p>A patch can be in edit or run mode; this really only affects how mouse clicks affect the patch. In edit mode, clicking and dragging selects and moves boxes or makes and cuts connections; in run mode clicking on boxes sends them messages which they react to in different ways. In run mode, number and message boxes can be used as controls. Normally, when you are in a performance you will stay in run mode; to change the patch you go to edit mode.</p>
<h3 id="creating-boxes"><span class="header-section-number">2.2.2</span> Creating Boxes</h3>
<p>You can create boxes (objects, messages, GUIs, and comments) using the “put” menu. Note the handy accelerators. Object and message boxes are empty at first; drag them where you want them and type in the text. The GUI objects (which come in several flavors) require no typing; just create and place them.</p>
<p>You will often find it more convenient to select a box and “duplicate” it (in the Edit menu) than to use the “Put” menu. If you select and duplicate several items, any connections between them will be duplicated as well.</p>
<h3 id="the-selection"><span class="header-section-number">2.2.3</span> The Selection</h3>
<p>Boxes in a Pd window may be selected by clicking on them. To select more than one object you may use shift-click or click on a blank portion of the window and drag the cursor to select all objects within a rectangle.</p>
<p>Clicking on an unselected object, message, or comment box makes the text active, i.e., ready to be text edited. (If you select using the rectangle method, the text isn’t activated.) Once you’ve activated a text box, you may type into it (replacing the selected text) or use the mouse to change the selection.</p>
<p>You may also select a single connection (patch cord) by clicking on it. You can’t have connections and boxes selected simultaneously.</p>
<h3 id="deleting-cutting-and-pasting"><span class="header-section-number">2.2.4</span> Deleting, Cutting, and Pasting</h3>
<p>If you select a box, a connection, or several boxes, and if you haven’t made any text active, you can “delete” the selection by hitting the backspace or delete key. You can also “cut” “copy” and “paste” using menu items. Notice that pasting puts the new object(s) right down on top of the old ones.</p>
<p>The “duplicate” menu item performs a copy and paste with a small offset so you can see the new boxes. You can drag them together to a new place on the screen.</p>
<p>You can cut and paste between windows within Pd but cut/paste isn’t integrated with the OS in any way. Cut/copy/paste for activated text in boxes isn’t implemented yet, although in Linux at least you can “X-paste” into and out of “text” dialogs (created with the “edit text” menu item.)</p>
<h3 id="changing-the-text"><span class="header-section-number">2.2.5</span> Changing the Text</h3>
<p>To change a text item, you can select it and then edit the text. If you only click once, the entire text is selected and your typing will replace everything. Click again and drag to select a portion of the text to retype.</p>
<p>If there’s more than a small amount of text (in a comment, for example) you might want to select the text and choose “text editor” from the Edit menu, which opens a text editing window with a copy of the text in it. Hitting “send” in that window is exactly equivalent to retyping the text into Pd; you can send it to more than one box in sequence if you want.</p>
<p>If you click a box and move the mouse without releasing the button this displaces the entire box. If you wish to displace a box which is already selected, first de-select the box by clicking outside it; otherwise you will be selecting text instead of moving the box.</p>
<p><em>The updated text only becomes part of the patch when you de-select the object.</em> Changing the text in an “object” box deletes the old object and creates a new one; the internal state of the old one is lost.</p>
<h3 id="connecting-and-disconnecting-boxes"><span class="header-section-number">2.2.6</span> Connecting and Disconnecting Boxes</h3>
<p>To make a connection between two boxes, click on any outlet of the first one, drag toward an inlet of the second one, and release. You can release the mouse button anywhere within the target object and the connection will be made to the nearest inlet.</p>
<p>Connections are broken by selecting them and using “cut” or the backspace or delete key.</p>
<h3 id="popup-menu-for-properties-open-and-help"><span class="header-section-number">2.2.7</span> Popup Menu for Properties, Open, and Help</h3>
<p>All the “clicking” mentioned above is done with the left mouse button. The right button, instead, gives a popup menu offering “properties,” “open,” and “help”. (For Macintosh users who may only have one button on their mouse, double-clicking is mapped to right-click.)</p>
<p>Selecting “help” on an object gets a Pd patch that demonstrates how to use it. “Help” for the canvas as a whole (right-clicking outside any object) gives a list of all built-in objects.</p>
<p>The “open” menu item is only enabled if you right-click on a subpatch (see below) and causes Pd to open it. Ordinary subpatches may also be opened by clicking on them, but for “graph-on-parent” ones, this is the only way to do it.</p>
<p>The “properties” dialog allows you to change certain settings of GUI objects, or of the patch itself (by clicking outside any box.)</p>
<h3 id="miscellaneous"><span class="header-section-number">2.2.8</span> Miscellaneous</h3>
<p>Control-q “quits” Pd, but asks you to comfirm the quit. To quit without having to confirm, use command-shift-Q.</p>
<h2 id="messages"><span class="header-section-number">2.3</span> Messages</h2>
<p>In Pd, objects intercommunicate by sending messages and/or audio signals. Pd messages are sporadic, like MIDI messages or music N “Note cards.”</p>
<h3 id="anatomy-of-a-message"><span class="header-section-number">2.3.1</span> Anatomy of a Message</h3>
<p>Messages contain a selector followed by any number of arguments. The selector is a symbol, which appears in the patch as a non-numeric string with no white space, semicolons, or commas. The arguments may be symbols or numbers. Numbers in Pd are kept in 32-bit floating point, so that they can represent integers exactly between -8388608 and 8388608. (In Max, there are separate data types for integers and floating point numbers; Pd uses only float.)</p>
<p>When a message is passed to something (which is often an inlet of a box but could be anything that can receive a message), the selector of the message is checked against the receiver. If the receiver recognizes messages of that selector, it carries out some corresponding action. For instance, here is a “float” object:</p>
<figure>
<img src="fig3.1.jpg" alt="float object" /><figcaption>float object</figcaption>
</figure>
<p>The two rectangles at the top are usually both called “inlets” but the one at the left directs incoming messages to the “float” object itself, whereas the one at the right directs messages to an auxiliary “inlet” object. The float object proper (represented by the left-hand inlet) accepts messages with selector “float” and “bang”. The right-hand inlet takes only the message selector “float”. These two selectors, along with “symbol” and “list”, are usually used to denote an object’s main action, whatever it may be, so that objects can be interconnected with maximum flexibility.</p>
<p>It is possible to type messages which start with a number, which cannot be used as a selector. A single number is always given the “float” selector automatically, and a message with a number followed by other arguments is given the selector “list”.</p>
<h3 id="depth-first-message-passing"><span class="header-section-number">2.3.2</span> Depth First Message Passing</h3>
<p>In Pd whenever a message is initiated, the receiver may then send out further messages in turn, and the receivers of those messages can send yet others. So each message sets off a tree of consequent messages. This tree is executed in depth first fashion. For instance in the patch below:</p>
<figure>
<img src="fig3.2.jpg" alt="depth first message passing" /><figcaption>depth first message passing</figcaption>
</figure>
<p>the order of arrival of messages is either A-B-C-D or A-C-D-B. The “C” message is not done until the “D” one is also, and the “A” is not done until all four are. It is indeterminate which of “B” or “C” is done first; this depends on what order you made the connections in (in Max, it’s automatically sorted right to left).</p>
<p>Message-passing can give rise to infinite loops of the sort shown here:</p>
<figure>
<img src="fig3.3.jpg" alt="infinite message passing loop" /><figcaption>infinite message passing loop</figcaption>
</figure>
<p>Here the left-hand “+” can’t finish processing until the right-hand one has been sent the result “2”, which can’t finish processing that until the left-hand one has been sent “3”, and so on. Pd will print an error message reporting a “stack overflow” if this happens.</p>
<p>However, it is legal to make a loop if there is a “delay” object somewhere in it. When the “delay” receives a message it schedules a message for the future (even if the time delay is 0) and is then “finished;” Pd’s internal scheduler will wake the delay back up later.</p>
<h3 id="hot-and-cold-inlets-and-right-to-left-outlet-order"><span class="header-section-number">2.3.3</span> Hot and Cold Inlets and Right to Left Outlet Order</h3>
<p>With few exceptions (notably “timer”), objects treat their leftmost inlet as “hot” in the sense that messages to left inlets can result in output messages. So the following is a legal (and reasonable) loop construct:</p>
<figure>
<img src="fig3.4.jpg" alt="hot and cold inlets" /><figcaption>hot and cold inlets</figcaption>
</figure>
<p>Here the “f” is an abbreviation for “float”. Note that the “+ 1” output is connected to the right-hand inlet of “f”. This “cold” inlet merely stores the value for the next time the “f” is sent the “bang” message.</p>
<p>It is frequently desirable to send messages to two or more inlets of an object to specify its action. For instance, you can use “+” to add two numbers; but to do it correctly you must make sure the right hand inlet gets its value first. Otherwise, when the left hand side value comes in, “+” will carry out the addition (since the left hand inlet is the “hot” one) and will add this value to whatever was previously sitting in the right hand inlet.</p>
<p>Problems can arise when a single outlet is connected (either directly or through arbitrarily long chains of message passing) to different inlets of a single object. In this case it is indeterminate which order the two inlets will receive their messages. Suppose for example you wish to use “+” to double a number. The following is incorrect:</p>
<figure>
<img src="fig3.5.jpg" alt="incorrect inlet connection" /><figcaption>incorrect inlet connection</figcaption>
</figure>
<p>Here, I connected the left inlet before connecting the right hand one (although this is not evident in the appearance of the patch.) The “+” thus adds the new input (at left) to the previous input (at right).</p>
<p>The “trigger” object, abbreviated “t”, can be used to split out connections from a single outlet in a determinate order. By convention, all objects in Pd, when sending messages out more than one outlet, do so from right to left. If you connect these to inlets of a second object without crossing wires, the second object will get its leftmost inlet last, which is usually what you want. Here is how to use “trigger” to disambiguate the previous example:</p>
<figure>
<img src="fig3.6.jpg" alt="trigger to disambiguate" /><figcaption>trigger to disambiguate</figcaption>
</figure>
<p>“Cold” (non-leftmost) inlets are almost universally used to store single values (either numbers or symbols.) With the exception of “line” and “line~”, these values are “sticky,” i.e., once you set the value it is good until the next time you set it. (The “line” exception is for sanity’s sake.)</p>
<p>One more question sometimes comes up in execution order, which is the order in which two messages are sent to a single “cold” inlet. In this situation, since the messages are merged, the last value to be received is the value that is used in the computation.</p>
<h3 id="message-boxes"><span class="header-section-number">2.3.4</span> Message Boxes</h3>
<p>Message boxes are text boxes in which you type a message. When the message box is activated, either by clicking on it or sending something to its inlet, the message or messages are sent, either to the message box’s outlet or elsewhere as specified.</p>
<figure>
<img src="fig3.7.jpg" alt="message boxes" /><figcaption>message boxes</figcaption>
</figure>
<p>The first of the message boxes above contains the single number 1.5; this message has an implicit selector of “float.” The second is a list with three numbers in it, and in the third, the selector is “my” and the two arguments are the number 5 and the symbol “toes.”</p>
<p>Multiple messages may be separated by commas as shown:</p>
<figure>
<img src="fig3.8.jpg" alt="multiple messages in one box" /><figcaption>multiple messages in one box</figcaption>
</figure>
<p>Here the three messages are the numbers 1, 2, and 3, and they are sent in sequence (with no intervening time between them, as with the “trigger” object, and having depth-first consequences so that whatever chain of actions depending on “1” takes place before anything depending on “2” and so on.)</p>
<p>Semicolons may also separate messages. A message following a semicolon must specify a symbol giving a destination (in other words, semicolons are like commas except that they clear the “current destination” so that the next message specifies a new one). The “current destination” is at first the message box’s own outlet. In the example below, the leading semicolon immediately redirects messages from the outlet to an object named “fred” (which is here a receive object), and likewise the next message is sent to “sue.”</p>
<figure>
<img src="fig3.9.jpg" alt="semicolons to send messages" /><figcaption>semicolons to send messages</figcaption>
</figure>
<p>Certain other objects (Pd windows, for example, and arrays) have Pd names and can be sent messages this way. Also, the special object “pd” is defined to which you may send messages to start and stop DSP.</p>
<p>You can put variables in message boxes as shown below:</p>
<figure>
<img src="fig3.10.jpg" alt="variables in message boxes" /><figcaption>variables in message boxes</figcaption>
</figure>
<p>Here, “$1”, etc., refer to the arguments of the arriving message (and aren’t defined if you send a “bang” message or if you click on the message box to activate it.) Dollar sign variables are either numbers or symbols depending on the incoming message; if symbols, you may even use them to specify variable message selectors or destinations.</p>
<h2 id="audio-signals"><span class="header-section-number">2.4</span> Audio Signals</h2>
<p>Using Pd you can build audio patches which can synthesize musical sounds, analyze incoming sounds, process incoming sounds to produce transformed audio outputs, or integrate audio processing with other media. This section describes how Pd treats audio signals.</p>
<h3 id="sample-rate-and-format"><span class="header-section-number">2.4.1</span> Sample Rate and Format</h3>
<p>Pd’s audio signals are internally kept as 32-bit floating point numbers, so you have all the dynamic range you could want. However, depending on your hardware, audio I/O is usually limited to 16 or 24 bits. Inputs all appear between the values of -1 and 1; and output values will be clipped to that range. Pd assumes a sample rate of 44100 unless you override this ( in Pd’s command line or in the “audio setup” dialog).</p>
<p>Pd can read or write samples to files either in 16-bit or 24-bit fixed point or in 32-bit floating point, in WAV, AIFF, or AU format, via the soundfiler, readsf, and writesf objects.</p>
<h3 id="tilde-objects-and-audio-connections"><span class="header-section-number">2.4.2</span> Tilde Objects and Audio Connections</h3>
<p>Audio computations in Pd are carried out by “tilde objects” such as “osc~” whose names conventionally end in a tilde character to warn you what they are. Tilde objects can intercommunicate via audio connections. When audio computation is turned on, or when you change the audio network while audio is on, Pd sorts all the tilde objects into a linear order for running; then this linear list is run down in blocks of 64 samples each; at 44100 Hz. this means the audio network runs every 1.45 milliseconds.</p>
<p>Inlets or outlets are configured in Pd either for messages or audio; it’s an error to connect an audio outlet to a non-audio inlet or vice versa; usually these errors are detected at “sort time” when audio is started or the network changed with audio running. An object’s leftmost inlet may accept both audio and messages; any other inlet is either one or the other.</p>
<p>The audio network, that is, the tilde objects and their interconnections, must be acyclic. If there are loops, you will see the error message at “sort time.” When errors are reported at sort time there is no easy way to find the source of the error. You can build algorithms with feedback using nonlocal signal connections.</p>
<p>Your subpatches can have audio inlets and outlets via the inlet~ and outlet~ objects.</p>
<h3 id="converting-audio-to-and-from-messages"><span class="header-section-number">2.4.3</span> Converting Audio to and from Messages</h3>
<p>If you want to use a control value as a signal, you can use the sig~ object to convert it. The +~, -~, *~, /~, osc~, and phasor~ objects can be configured to take control or signal inputs.</p>
<p>The other direction, signal to control, requires that you specify at what moments you want the signal sampled. This is handled by the snapshot~ object, but you can also sample a signal with tabwrite~ and then get access it via tabread or tabread4 (note the missing tildes!). There are also analysis objects, the simplest of which is “env~”, the envelope follower.</p>
<h3 id="switching-and-blocking"><span class="header-section-number">2.4.4</span> Switching and Blocking</h3>
<p>You can use the switch~ or block~ objects to turn portions of your audio computation on and off and to control the block size of computation. There may be only one switch~ or block~ object in any window; it acts on the entire window and all of its subwindows, which may still have their own nested switch~/block~ objects. Switch~ and block~ take a block size and an overlap factor as arguments; so for instance, “block~ 1024 4” specifies 1024 sample blocks, overlapped by a factor of 4 relative to the parent window. Switch~ carries a small computational overhead in addition to whatever overhead is associated with changing the block size.</p>
<p>Larger block sizes than 64 should result in small increases in run-time efficiency. Also, the fft~ and related objects operate on blocks so that setting the block size also sets the number of FFT channels. You may wish to use block sizes smaller than 64 to gain finer resolutions of message/audio interaction, or to reduce “block delay” in feedback algorithms. At the (untested) extreme, setting the block size to one allows you to write your own recursive filters.</p>
<p>You can use switch~ to budget your DSP computations; for instance you might want to be able to switch between two synthesis algorithms. To do this, put each algorithm in its own subpatch (which can have sub-sub patches in turn, for a voice bank for instance), and switch each one off as you switch the other one on. Beware of clicks; if you have a line~ controlling output level, give it time to ramp to zero before you switch it off or it will be stuck at a nonzero value for the next time it comes back on.</p>
<p>When a subpatch is switched off its audio outputs generate zeros; this costs a fairly small overhead; a cheaper way to get outputs is to use throw~ inside the switched module and catch~ outside it.</p>
<h3 id="nonlocal-signal-connections"><span class="header-section-number">2.4.5</span> Nonlocal Signal Connections</h3>
<p>You may wish to pass signals non-locally, either to get from one window to another, or to feed a signal back to your algorithm’s input. This can be done using throw~/catch~, send~/receive~, or delwrite~/delread~ pairs. Throw~ and catch~ implement a summing bus; throw~ adds into the bus and catch~ reads out the accumulated signal and zeros the bus for the next time around. There can be many throw~ objects associated with a single catch~, but a throw~ can’t talk to more than one catch~. You can reset the destination of a throw~ if you want to.</p>
<p>Send~ just saves a signal which may then be receive~d any number of times; but a receive~ can only pick up one send~ at a time (but you can switch between send~s if you want.)</p>
<p>Don’t try to throw~ and catch~ or send~ and receive~ between windows with different block sizes. The only re-blocking mechanisms which are well tested are inlet~ and outlet~.</p>
<p>When you send a signal to a point that is earlier in the sorted list of tilde objects, the signal doesn’t get there until the next cycle of DSP computation, one block later; so your signal will be delayed by one block (1.45 msec by default.) Delread~ and delwrite~ have this same restriction, but here the 1.45 msec figure gives the minimum attainable delay. For non-recursive algorithms, a simple flanger for example, you might wish to ensure that your delread~ is sorted after your delwrite~. The only way to ensure this is to create the delread~ after you created the delwrite~; if things get out of whack, just delete and re-create the delread~.</p>
<h2 id="scheduling"><span class="header-section-number">2.5</span> Scheduling</h2>
<p>Pd uses 64-bit floating point numbers to represent time, providing sample accuracy and essentially never overflowing. Time appears to the user in milliseconds.</p>
<h3 id="audio-and-messages"><span class="header-section-number">2.5.1</span> Audio and Messages</h3>
<p>Audio and message processing are interleaved in Pd. Audio processing is scheduled every 64 samples at Pd’s sample rate; at 44100 Hz. this gives a period of 1.45 milliseconds. You may turn DSP computation on and off by sending the “pd” object the messages “dsp 1” and “dsp 0.”</p>
<p>In the intervals between, delays might time out or external conditions might arise (incoming MIDI, mouse clicks, or whatnot). These may cause a cascade of depth-first message passing; each such message cascade is completely run out before the next message or DSP tick is computed. Messages are never passed to objects during a DSP tick; the ticks are atomic and parameter changes sent to different objects in any given message cascade take effect simultaneously.</p>
<p>In the middle of a message cascade you may schedule another one at a delay of zero. This delayed cascade happens after the present cascade has finished, but at the same logical time.</p>
<h3 id="computation-load"><span class="header-section-number">2.5.2</span> Computation Load</h3>
<p>The Pd scheduler maintains a (user-specified) lead on its computations; that is, it tries to keep ahead of real time by a small amount in order to be able to absorb unpredictable, momentary increases in computation time. This is specified using the “audiobuffer” or “frags” command line flags (see <a href="#getting-pd-to-run">Getting Pd to Run</a>).</p>
<p>If Pd gets late with respect to real time, gaps (either occasional or frequent) will appear in both the input and output audio streams. On the other hand, disk streaming objects will work correctly, so that you may use Pd as a batch program with soundfile input and/or output. The “-nogui” and “-send” startup flags are provided to aid in doing this.</p>
<p>Pd’s “realtime” computations compete for CPU time with its own GUI, which runs as a separate process. A flow control mechanism will be provided someday to prevent this from causing trouble, but it is in any case wise to avoid having too much drawing going on while Pd is trying to make sound. If a sub-window is closed, Pd suspends sending the GUI update messages for it; but not so for miniaturized windows as of version 0.32. You should really close them when you aren’t using them.</p>
<h3 id="determinism"><span class="header-section-number">2.5.3</span> Determinism</h3>
<p>All message cascades that are scheduled (via “delay” and its relatives) to happen before a given audio tick will happen as scheduled regardless of whether Pd as a whole is running on time; in other words, calculation is never reordered for any real-time considerations. This is done in order to make Pd’s operation deterministic.</p>
<p>If a message cascade is started by an external event, a time tag is given it. These time tags are guaranteed to be consistent with the times at which timeouts are scheduled and DSP ticks are computed; i.e., time never decreases. (However, either Pd or a hardware driver may lie about the physical time an input arrives; this depends on the operating system.) “Timer” objects which measure time intervals measure them in terms of the logical time stamps of the message cascades, so that timing a “delay” object always gives exactly the theoretical value. (There is, however, a “realtime” object that measures real time, with nondeterministic results.)</p>
<p>If two message cascades are scheduled for the same logical time, they are carried out in the order they were scheduled.</p>
<h2 id="semantics"><span class="header-section-number">2.6</span> Semantics</h2>
<p>This section describes how objects in Pd are created, how they store data and how object and other boxes pass messages among themselves.</p>
<h3 id="creation-of-objects"><span class="header-section-number">2.6.1</span> Creation of Objects</h3>
<p>The text in a box has a different function depending on whether it is a message, atom (number/symbol), or object box. In message boxes the text specifies the message or messages it will send as output. In atom boxes the text changes at run time to show the state of the box, which is either a number or a symbol.</p>
<p>In an object box, as in a message box, the text specifies a message; but here the message is to be passed to Pd itself, once, and the message’s effect is to create the object in question. When you open a file, all the objects created are created using their text as “creation messages.” If you type a new message into an object box (or change it), the old object is destroyed and the message is used to create the new one.</p>
<p>The selector of the message (the first word in the message) is a selector which Pd interprets to mean which type of object to create. Any message arguments (called “creation arguments”) are used to parameterize the object being created. Thus in “makenote 64 250” the selector “makenote” determines the class of object to create and the creation arguments 64 and 250 become the initial velocity and duration.</p>
<h3 id="persistence-of-data"><span class="header-section-number">2.6.2</span> Persistence of Data</h3>
<p>Among the design principles of Pd is that patches should be printable, in the sense that the appearance of a patch should fully determine its functionality. For this reason, if messages received by an object change its action, since the changes aren’t reflected in the object’s appearance, they are not saved as part of the file which specifies the patch and will be forgotten when the patch is reloaded. In the same way, if you delete and then recreate an object the original object’s state is not retained but is instead reinitialized (possibly as specified by creation arguments.)</p>
<p>An exception is made for subpatches whose “state” is the configuration of the subpatch; as a special case, this configuration is restored when the patch is read from a file. Also, if you rename the subpatch, for instance typing “pd jane” instead of “pd spot,” the contents of the patch are preserved and only the text in the object box and the window title of the subpatch are changed.</p>
<p>It is probably bad style to specify creation arguments ala “makenote 64 250” if you are going to override them later; this is confusing to anyone who tries to understand the patch.</p>
<h3 id="message-passing"><span class="header-section-number">2.6.3</span> Message Passing</h3>
<p>Messages in Pd consist of a selector (a symbol) and zero or more arguments (which may be symbols or numbers). To pass a message to an object, Pd first checks the selector against the class of the object. Message boxes all are of one class and they all take the same incoming messages and dispense them according to their state, that is, the text typed into the box. The same holds for atom boxes (number or symbol) except that their state may change (it consists of the number or symbol showing).</p>
<p>Object boxes may have many different classes. The class is usually determined by the selector of the creation message, i.e., the first atom of the creation message which is usually a symbol.</p>
<p>Each class comes with a fixed collection of messages it may be sent. For example, the “float” or “f” object takes “bang” and “float.” These messages are sent to “float” objects (objects whose class is float) via the leftmost, hot inlet. (The right inlet is a separate, auxiliary object.) Objects of class “float” respond to the message “bang” by outputting their current value, that is, by sending a “float” message to their outlet. They respond to “float” messages by setting their value and then outputting it.</p>
<p>Each other class (like “float”) in Pd has its own protocol for responding to messages it is sent, and may take “float” and “bang” messages, or others in addition or instead of them.</p>
<h3 id="inlets-and-lists"><span class="header-section-number">2.6.4</span> Inlets and Lists</h3>
<p>The leftmost connection point at the top of most objects represents the object itself. Any other dark rectangle is a separate object called an “inlet” although in Pd there are 4 individual inlet classes. The class of the inlet determines which messages it will take: symbol, float, or other; and the inlet forwards the message either to the object proper or to some proxy, usually one that the object creates for the occasion.</p>
<p>Unless they arrange otherwise by defining a “list” method, objects respond to the “list” message by distributing the arguments of the message to their inlets, except for the first argument which is passed as a “float” or “symbol” message to the object proper.</p>
<h3 id="dollar-signs"><span class="header-section-number">2.6.5</span> Dollar Signs</h3>
<p>In message or object boxes, message arguments starting with a dollar sign and a number (like “$1” or “$3-bazoo”) are variables which are substituted with values supplied as part of the environment the message is passed in. In the case of message boxes, the environment consists of the arguments of the “list” message (possibly extrapolated from “bang,” “float,” or other) that the message box is responding to. Thus, if a message box gets “23 skidoo” and if it contains the text, “$2 until $1,” out comes the message, “skidoo until 23.”</p>
<p>Object boxes contain text which forms a message to be sent to Pd to create and initialize the object. Here, $1, etc., are taken from the context in which the patch was loaded. When the patch is a new document or opened from a file the “$” variables are undefined. But if the patch is an abstraction (see the next section) they are taken from the abstractions’ creation arguments.</p>
<p>Constructions such as “$1-x” are expanded by string concatenation. This is the mechanism for making local variables. In particular, $0 in an abstraction is a counter which is guaranteed to be unique to that abstraction, so sends and receives with names like “$0-bear” can be used as local send/receive pairs.</p>
<p>Note that the expansion of variables such as $0 and $1 only works at the beginning of the symbol; so, for instance, “rats-$1” will not be expanded. Occasionally you may want to have double or triple substitutions; this can be done one stage at a time by nesting abstractions (with each subpatch adding its own $-variable to the beginning of a symbol and passing that on as argument to a further abstraction.)</p>
<p>For example, if you want to get dog-food, dog-ears, and cat-food, for example, have an abstraction “a1” that invokes an abstraction “a2” twice, as “a2 $1-food” and “a2 $1-ears”, and then in a third patch call a1 twice, as “a1 cat” and “a1 dog”. Inside the four “a2” copioes, $1 will evaluate to “dog-food”, “cat-food”, “dog-ears”, and “cat-ears”.</p>
<h2 id="subpatches"><span class="header-section-number">2.7</span> Subpatches</h2>
<p>Pd offers two mechanisms for making subpatches, called “one-off subpatches” and “abstractions.” In either case the subpatch appears as an object box in a patch. If you type “pd” or “pd my-name” into an object box, this creates a one-off subpatch. For instance, in this fragment:</p>
<figure>
<img src="fig7.1.jpg" alt="subpatch" /><figcaption>subpatch</figcaption>
</figure>
<p>the box in the middle, if clicked on, opens the sub-patch shown here:</p>
<figure>
<img src="fig7.2.jpg" alt="open subpatch window" /><figcaption>open subpatch window</figcaption>
</figure>
<p>The contents of the subpatch are saved as part of the parent patch, in one file. If you make several copies of a subpatch you may change them individually.</p>
<p>The objects, “inlet,”, “inlet~,” “outlet,” and “outlet~,”, when put in a subpatch, create inlets and outlets for the object box containing the subpatch. This works equally for one-off subpatches and abstractions. The inlet~ and outlet~ versions create inlets and outlets for audio signals. You can’t mix messages and audio in a subpatch inlet or outlet; they must be one or the other exclusively. Inlets and outlets appear on the invoking box in the same left-to-right order as they appear in the subpatch.</p>
<h3 id="abstractions"><span class="header-section-number">2.7.1</span> Abstractions</h3>
<p>To make an abstraction, save a patch with a name such as “abstraction1.pd” and then invoke it as “abstraction1” in an object box:</p>
<figure>
<img src="fig7.3.jpg" alt="abstraction" /><figcaption>abstraction</figcaption>
</figure>
<p>Here we’re invoking a separate file, “abstraction1.pd”, which holds the patch shown here (the border is the same as for the subpatch above):</p>
<figure>
<img src="fig7.4.jpg" alt="abstraction example" /><figcaption>abstraction example</figcaption>
</figure>
<p>You may create many instances of “abstraction1” or invoke it from several different patches; and changing the contents of “abstraction1” will affect all invocations of it as they are created. An analogy from the “c” programming language is that one-off subpatches are like bracketed blocks of code and abstractions are like subroutines.</p>
<p>Abstractions are instantiated by typing the name of a patch (minus the “.pd” extension) into an object box. You may also type arguments; for instance if you have a file “my-abstraction.pd” you may type “my-abstraction 5” to set the variable $1 to 5. This is defined only for object boxes (not for messages) in the abstraction. (For message boxes, “$1”, etc, have a different meaning as described above.) If you want to send a message with a $1 in the sense of a creation argument of an abstraction, you must generate it with an object box such as “float $1”, “symbol $1”, or perhaps “pack $1 $2”, which may then be sent to a message box.</p>
<p>The corresponding feature in Max (both Opcode and Ircam) was the “#1” construct. In a Max abstraction, “#1”, etc., are replaced by the creation argument. This has the disadvantage that you can’t edit the abstraction as instantiated in the patch since the “#” variables are substituted. In Pd the “$” variables in object boxes are spelled literally as “$” variables so that it’s meaningful to edit them from within their calling patch. On the Pd side, however, there is the disadvantage that it’s confusing to have “$” expanded at a different time in an object box than in a message box. In an object box, the “$” argument is expanded at creation time, and in a message box, at message time.</p>
<h3 id="graph-on-parent-subpatches"><span class="header-section-number">2.7.2</span> Graph-on-parent Subpatches</h3>
<p>If you open the “properties” dialog for a subpatch or an abstraction, you can check the “graph on parent” box to have the controls of the subpatch/abstraction appear on the parent. For instance, here is an invocation of “abstraction2”:</p>
<figure>
<img src="fig7.5.jpg" alt="graph-on-parent abstraction" /><figcaption>graph-on-parent abstraction</figcaption>
</figure>
<p>where the patch “abstraction2.pd” contains:</p>
<figure>
<img src="fig7.6.jpg" alt="inside graph-on-parent abstraction" /><figcaption>inside graph-on-parent abstraction</figcaption>
</figure>
<p>Here, the number box in the abstraction shows up on the box that invoked the abstraction. The “graph on parent” flag is set in the abstraction (and is saved as part of the abstraction); to set it, open the “properties” dialog for the “abstraction2” canvas by right-clicking on any white space in the patch.</p>
<p>To open the subpatch, right click on the object and select “open”. (On Macintoshes without a 2-button mouse, you can double-click in edit mode instead.) It doesn’t work just to click on the object in run mode since clicks are sent to visible controls and/or arrays.</p>
<p>When the sub-patch is closed, all controls in it appear on the object instead; so the number box in the sub-patch in the example above is the same one as you see in the box. Only controls are made visible in this way</p>
<h2 id="numeric-arrays"><span class="header-section-number">2.8</span> Numeric Arrays</h2>
<p>Linear arrays of numbers recur throughout the computer musician’s bag of tricks, beginning with the wavetable oscillator. The wavetable oscillator later was reinvented as the looping sampler. Also, table lookup is used for nonlinear distortion of audio signals. In the domain of control, arrays of numbers can specify control mappings, probability densities, voicing data, and much more.</p>
<p>Arrays in Pd should be allocated (and possible read in from a file) before beginning to make sound, since memory allocation and disk operations may take long enough to cause audio buffer overruns or underruns. Pd provides two ways to define new arrays, as “graphs” and “tables”. In either case the array has a pre-defined name and size (i.e., number of points). Elements of the array are stored as floating-point numbers, 4 bytes apiece</p>
<p>If you use an array to store a one-second sound at 44.1 kHz you will need 176 kilobytes, or a one-minute sound, 10.6 megabytes. To store a sound with two or more channels, use a separate array for each channel.</p>
<p>Arrays are also useful as transfer functions, for example for nonlinear distortion of an audio signal, or to map a control onto a synthesis parameter. In situations like this one typically uses much shorter arrays, of no more than a few hundred elements. They are also useful for storing measured spectra derived from the fft~ objects, and probably for many other uses.</p>
<p>Arrays usually appear within subpatches created to house them, whether in “graph on parent” form (so that you see them within a rectangle drawn on the containing patch), or as a regular subpatch (which you see as a text box.) In the “graph on parent” form, an array appears as shown:</p>
<figure>
<img src="fig8.1.jpg" alt="array" /><figcaption>array</figcaption>
</figure>
<p>Arrays are indexed from 0 to N-1 where N is the number of points in the array. You can read an array value using the tabread object:</p>
<figure>
<img src="fig8.2.jpg" alt="array indexing" /><figcaption>array indexing</figcaption>
</figure>
<p>Here we see that the third point of the array (index 2) has the value 0.4. To write into the array you can use the tabwrite object:</p>
<figure>
<img src="fig8.3.jpg" alt="setting an value in an array" /><figcaption>setting an value in an array</figcaption>
</figure>
<p>In this example, sending the message sets the third element to 0.5. (You may also send the two numbers to the two inlets separately.)</p>
<p>The two previous examples showed control operations to read and write from and to arrays. These may also be done using audio signals. For example, the patch below creates a 440 Hz. tone with “array1” as a waveform:</p>
<figure>
<img src="fig8.4.jpg" alt="setting an array with a waveform" /><figcaption>setting an array with a waveform</figcaption>
</figure>
<p>Here phasor~’s outputs a sawtooth wave, repeating 440 times per second, whose output range is from 0 to 1. The multiplier and adder adjust the range from 1 to 11, and then the values are used as indices for tabread4~, which is a 4-point interpolating table lookup module. (Much more detail is available in the audio example patches in the “pure documentation” series.)</p>
<p>To create a new array, select “array” from the “put” menu. Up will come a dialog window to set initial properties of the array. By default, a new graph is created to hold the array, but it may also be housed in the most recently created graph instead. Other properties may be specified there and/or changed later using the “properties” dialog.</p>
<p>If you select “properties” on an array in a graph, you two dialogs, one for the array and one for the graph. The array dialog looks like this:</p>
<figure>
<img src="fig8.5.jpg" alt="array properties window" /><figcaption>array properties window</figcaption>
</figure>
<p>You may use this to change the name and size, in addition to another property, “save contents”. If “save contents” is selected, the array’s values are stored in the containing patch; otherwise they’re initialized to zero each time the patch is reloaded. If you intend to use arrays to store sounds, you will probably not wish to store them in the patch but as separate soundfiles. This will be more efficient, and you may also then use a sound editor to modify them outside Pd.</p>
<p>If you check “delete me” and then “OK”, the array will be deleted. This is an odd interface for deleting an object, and is only provided because Pd lacks a mechanism for selecting arrays (so that “cut” could serve).</p>
<p>The graph dialog (which also pops up) is shown here:</p>
<figure>
<img src="fig8.6.jpg" alt="graph properties" /><figcaption>graph properties</figcaption>
</figure>
<p>The X bounds initially range from 0 to the number of points in the table minus one (this is a good choice for arrays, although graphs holding other kinds of objects might require other X bounds.) The Y bounds should be chosen to reflect the natural range of the table, so that stored sounds would naturally range from -1 to 1, but a sequence of frequency values might range from 0 to 20,000. Finally, you choose the screen size of the graph, width and height, in screen pixels.</p>
<p>Many other operations are defined for arrays; see the related patches in the tutorial (starting at 2.control/15.array.pd) for more possibilities.</p>
<h2 id="data-structures"><span class="header-section-number">2.9</span> Data Structures</h2>
<p>(Note: this section is adapted from an article submitted to ICMC 2002.)</p>
<p>The original idea in developing Pd was to make a real-time computer music performance environment like Max, but somehow to include also a facility for making computer music scores with user-specifiable graphical representations. This idea has important precedents in Eric Lindemann’s Animal and Bill Buxton’s SSSP. An even earlier class of precedents lies in the rich variety of paper scores for electronic music before it became practical to offer a computer-based score editor. In this context, scores by Stockhausen ( <em>Kontakte</em> and <em>Studie II</em>) and Yuasa (<em>Toward the Midnight Sun</em>) come most prominently to mind, but also Xenakis’s <em>Mycenae-alpha</em>, which, although it was realized using a computer, was scored on paper and only afterward laboriously transcribed into the computer.</p>
<p>Pd is designed to to offer an extremely unstructured environment for describing data structures and their graphical appearance. The underlying idea is to allow the user to display any kind of data he or she wants to, associating it in any way with the display. To accomplish this Pd introduces a graphical data structure, somewhat like a data structure out of the C programming language, but with a facility for attaching shapes and colors to the data, so that the user can visualize and/or edit it. The data itself can be edited from scratch or can be imported from files, generated algorithmically, or derived from analyses of incoming sounds or other data streams. Here is one simple example of a very short musical sketch realized using Pd:</p>
<figure>
<img src="fig9.1.jpg" alt="graphical score" /><figcaption>graphical score</figcaption>
</figure>
<p>The example, which only lasts a few seconds, is a polyphonic collection of time-varying noise bands. The graphical “score” consists of six objects, each having a small grab point at left, a black shape to show dynamic, and a colored shape to show changing frequency and bandwidth. The horizontal axis represents time and the vertical axis, frequency (although, as explained later, this behavior isn’t built into pd). The dynamic and frequency shapes aren’t constrained to be connected or even to be proximate, but since they pertain to the same sound their horizontal positions line up. In this example the last (furthest-right) object is percussive (as seen by the black shape) and has a fixed frequency and bandwidth, whereas the large, articulated shape in the center has a complicated trajectory in both frequency and dynamic. The color of the frequency trace determines the voice number used to realize it.</p>
<p>Each object is thus composed of a combination of scalar values (color; aggregate position in X and Y coordinates) and array values (time/value pairs for the black traces and time/frequency/bandwidth triples for the colored ones.) This is all specified by the user using Pd’s “template” mechanism.</p>
<p>Here is the template associated with the graphical objects shown above:</p>
<figure>
<img src="fig9.2.jpg" alt="template for graphical score" /><figcaption>template for graphical score</figcaption>
</figure>
<p>Templates consist of a data structure definition (the “struct” object) and zero or more drawing instructions (“filledpolygon” and “plot”). The “struct” object gives the template the name, “template-toplevel.” The data structure is defined to contain three floating point numbers named “x”, “y”, and “voiceno,” and two arrays, one named “pitch” whose elements belong to another template named “template-pitch,” and similarly for the array “amp.”</p>
<p>In general, data structures are built from four data types: scalar floats and symbols, arrays (whose elements share another, specified template) and lists (whose elements may have a variety of templates). The contents of a Pd window themselves form a list. Pd’s correlate of Max’s “table” object is implemented as a top-level array whose elements are scalars containing a single floating-point number.</p>
<p>Data structures in Pd may nest arbitrarily deeply using the array and list types. For example, a collection of sinusoidal tracks from an analysis engine could be implemented as an array of arrays of (pitch, amplitude) pairs; this appears as example 12 in Pd’s FFT object online tutorial.</p>
<p>After the “struct” object in the template shown above, the remaining three objects are <em>drawing instructions</em> , first for a rectangle (“filledpolygon”), and then for two arrays. The various graphical attributes that are specified for drawing instructions may be numerical constants or data structure field names; in the latter case the value varies depending on the data. For instance, the second creation argument to “plot” is the color. The first “plot” plots the “amp” field and the color is given as 0, or black. The second one plots “pitch” using the color “voiceno”. In this way the color of the second trace is attached to the “voiceno” slot in the data structure, so that color will vary according to its “voiceno” slot.</p>
<h3 id="traversal"><span class="header-section-number">2.9.1</span> Traversal</h3>
<p>Pd objects are provided to traverse lists and arrays, and to address elements of data structures for getting and setting. Here is a patch showing how these facilities could be used, for example, to sequence the graphical score shown above:</p>
<figure>
<img src="fig9.3.jpg" alt="traversal example patch" /><figcaption>traversal example patch</figcaption>
</figure>
<p>Pd has no built-in sequencer, nor even any notion that “x” values should be used as a time axis. (However, a “sort” function is provided, which reorders a list from left to right, on the assumption that users might often want to use Pd data collections as x-ordered sequences.) Recording sequences of events into lists, and/or playing the lists back as sequences, are functionalities that the user is expected to supply on top of Pd’s offerings, which, it is hoped, would allow those functionalities within a much larger range of possibilities, to include random re-orderings of events, score following, self-modifying scores, reactive improvisation, and perhaps much more.</p>
<p>Traversal of data is made possible by adding a new type of atom, “pointer”, to the two previously defined types that make up messages, to wit, numbers and symbols. Unlike numbers and symbols, pointers have no printed form and thus can’t be uttered in message boxes. Traversal objects such as “pointer” and “get” (among several others) can generate or use pointers. The pointer data type is also integrated into pipe-fitting objects such as “pack”, “unpack”, and “route”.</p>
<p>In the patch shown above, the topmost “pointer” object holds a pointer to the next object to “play” (by sending it to one of the “voice” abstractions at bottom.) The pointer object takes a “traverse” message to set it to the head of the list (named “pd-data”), and “next” messages to move to (and output) the next datum in the list (i.e., the next in the list of six objects in the score). Another “pointer” object is also used, further down, as a storage cell for pointers just as “float” is for numbers.</p>
<p>The center of any sequencer is always the “delay” object, which must be fed the time difference between each event (including the non-event of hitting “start”) and the next. As we extract each of the six objects in the score, we must wait the delay for playing that object, and then send its pointer to one of the “voice” abstractions to play it. However, we have to inspect the object itself to know the delay before playing it. So, in the loop, we peel off the first remaining object to play and inspect the time difference between it and the previous one, using this value to set the delay, but also storing the pointer in the lower “pointer” and “pack” objects.</p>
<p>The time difference needed to set the delay object is obtained using the “get template-toplevel x” object. (This is converted to incremental time (“-”), corrected for tempo, and fed to the delay.) Pd provides the “get” and “set” objects for reading and writing values from data structures. The two “get” objects shown here obtain the “x” and “voiceno” fields of the current object. The template name (template-toplevel) is supplied to the “get” objects so that they can look up the offset of the necessary field(s) in advance, for greater run-time efficiency.</p>
<p>Once the delay has expired, the object’s pointer is recalled (the lower “pointer” object), and the voice number is recalled. This is packed with the pointer itself and routed, so that the pointer goes to the appropriate voice. The voice number is shown as the color of the frequency trace in “999” units (first digit red, second green, third blue) and the “route” is arbitrarily set up to select among the six primary and secondary colors plus black.</p>
<p>The details of extracting the pitch and dynamic breakpoints from the arrays defined in the template are managed in the “voice” abstraction. The “voice” abstraction receives a pointer to a given object and manages the sequencing of the arrays; so it contains two sequencers itself. The nesting of the overall structure of the sequencer patch mirrors the nesting of the original data structures. Finally, the voice abstraction puts its audio output on a summing bus.</p>
<p>More general patches can easily be constructed which access heterogeneous lists of objects (having different templates). In this way, an arbitrarily rich personal “score language” can be developed and sequenced.</p>
<h3 id="accessing-and-changing-data"><span class="header-section-number">2.9.2</span> Accessing and Changing Data</h3>
<p>In general, accessing or changing data is done via “pointers” to “scalars”. Numbers and symbols within scalars are accessed using the “get” object and changed, in the same way, using “set”. Since lists and arrays are composed of scalars, every actual number or symbol in a data heap will be a number or symbol element of some scalar. To access them, it suffices to have objects to chase down elements of lists and arrays (given either a global name or a pointer to the containing scalar).</p>
<p>Lists are traversed in the way shown above; to get to a sublist of a scalar, the “get” object will provide a pointer, in the same way as it provides “float” or “symbol” elements of scalars. For arrays, an “element” object is provided which, given a scalar, a field name and a number, chases down the numbered, scalar, element of the named array field.</p>
<p>To alter “float” or “symbol” elements of scalars is straightforward using the “set” object, but arrays and lists can’t be set by assignment; there is no suitable data type available within messages. Lists could possibly be “settable” by passing pointers to other lists, but permitting this would have required either automatically doing deep copies of data structures to carry out the assignments, or else implementing a garbage collecting memory management system, either of which would be difficult to realize within real-time computation time constraints. Instead, all the data hanging from a scalar is considered as belonging to that scalar, and is left in memory until the scalar is deleted; the data may be changed atom by atom, but primitives are not provided which would imply unpredictable execution times.</p>
<p>The “getsize” and “setsize” objects are provided to access or change the number of elements in the array. For lists, an “append” object appends a new scalar for a given template to a list, after the element pointed to. (To insert a scalar at the beginning of a list, the pointer can be set to the “head” of the list, a formal location before the first list item.) Deletion is less flexible; the only operation is to delete an entire list. (There’s no reason not to provide finer-grain deletion mechanisms except that it’s not clear how to protect against stale pointers efficiently, except by voiding the entire collection of pointers into a list.)</p>
<h3 id="editing"><span class="header-section-number">2.9.3</span> Editing</h3>
<p>The graphical score shown above can be edited by dragging breakpoints, or by adding and deleting them, using mouse clicks. Also, entire objects or collections of them may be copied, pasted, and dragged around the screen. Alternatively, there is an editable (or computer generate-able or parse-able) text representation for the data, which may be seen or changed in a dialog window or read and written to external text files.</p>
<p>Since the graphical presentation of data objects is determined by drawing instructions, the drawing instructions are interpreted backwards to alter data as a result of mouse operations. If a given graphical dimension is controlled by a variable, that variable is then controlled by dragging along that dimension; if the dimension is constant, it can’t be altered by dragging.</p>
<p>Tricky situations can arise when the user changes the contents of templates. A change in drawing instructions can be accommodated by simply tracking down and redrawing all data objects using the template. However, changing the “struct” object itself make for less straightforward situations. The user might wish to reorder fields, delete them, add new ones, or rename them. When a “struct” object changes, Pd automatically conforms the data from the old structure to the new one. Fields with the same name as previously are maintained (reordering them as necessary); and if a field disappears but another of the same type appears, the new one(s) are taken to be renamings of the old one(s) in order of appearance. New fields which cannot be matched in this way with previously existing ones are assumed to be new and are initialized.</p>
<p>It can happen that two “struct” objects compete to define the same data structure, or that the user reads in data from a file which expects a different version of the structure, or alternatively, that the “struct” object for existing data objects disappears. For this reason, Pd maintains a private representation of the last active version of a “struct” until all similarly named “structs,” as well as all data using that “struct”, have disappeared. If the user introduces a new version of the “struct” and only later deletes the “current” one, the data is only conformed to the new version once the old one is deleted. In this way we avoid getting into situations where data is left hanging without its structure definition, or where data ends up belonging to two or more structures of the same name. The worst that can happen is that data may lose their drawing instructions, in which case Pd supplies a simple default shape.</p>
<h3 id="limitations"><span class="header-section-number">2.9.4</span> Limitations</h3>
<p>When examples get more complicated and/or dense than the one shown here, it becomes difficult to see and select specific features of a data collection; more work is needed to facilitate this. There should be some facility for turning drawing instructions on and off, or perhaps for switching between versions of a template, depending on the user’s desired view. There should also be a callback facility in the template for when an object is edited with the mouse, so that the user can bind actions to mouse clicks.</p>
<p>More generally, the collection of traversal objects that Pd provides is adequate to support a variety of modes of data collection and use, such as analysis and sequencing. But the patches required to traverse the data collections are not always simple. It would be desirable to find a more straightforward mechanism than that provided by the “pointer”, “get” and “set” objects.</p>
<p>The “data” facility, although part of the original plan for Pd, has only recently been implemented in its current form, and as (hopefully) the user base grows there will surely be occasions for many further extensions of the data handling primitives and the graphical presentation and editing functions.</p>
<hr />
<h1 id="getting-pd-to-run"><span class="header-section-number">3</span> Getting Pd to Run</h1>
<p><a href="#TOC">back to table of contents</a></p>
<p>The following are basic instructions on how to get Pd installed and running on your machine. More details are maintained online on the [pure-data.info] site.</p>
<p>Pd runs under Microsoft Windows, Linux, and macOS. How to get Pd up and running depends on your operating system, but the overall strategy is the same. You must first get and install it, and then untangle whatever problems arise in handling audio and MIDI input and output, and finally get Pd to meet its real-time obligations reliably.</p>
<p>Installation instructions are platform-specific; the following three sections will describe what to do for various operating systems you might have. In case of trouble also consult the Pd mailing list archive on <a href="http://iem.at/mailinglists/pd-list/" class="uri">http://iem.at/mailinglists/pd-list/</a> , which often has late-breaking news about configuration problems and solutions. The rest of this section describes how to get audio and MIDI to work.</p>
<h2 id="audio-and-midi"><span class="header-section-number">3.1</span> Audio and MIDI</h2>
<p>To test audio and MIDI, start Pd and select “test Audio and MIDI” from the “Media” menu. You should see a window like this:</p>
<figure>
<img src="fig11.1.png" alt="test tone patch" /><figcaption>test tone patch</figcaption>
</figure>
<p>First, try to get Pd to play a sine wave over your speakers. The “TEST TONE” control at top left turns this on and off. Normally, all the output channels are turned on so that when you turn the tone on (to a soft -40 dB or a louder -20 dB) you should get output on the first eight of your output channels. (If you have fewer than 8 output channels open, the extra channels aren’t played; and if you have more, this particular patch won’t use them.)</p>
<p>If there’s anything wrong, the most likely outcome is that you will hear nothing at all. This could be for any of at least three reasons: Pd might have failed to open the audio device; the audio card’s output volume might be set to zero; or your audio system might not be set to amplify the computer output.</p>
<p>The number boxes labeled “AUDIO INPUT” show the levels of incoming audio, in dB, with 100 being maximum. (Incoming signals may clip at RMS levels below 100; for instance, a sinusoid clips at about 97 dB.) Any DC present in the input (such as you get with cheap audio hardware) will show up as level unless you turn on the “input hipass” toggle at right; then the DC component is filtered out before metering.</p>
<p>To test the quality of audio input and output, turn on “monitor” (also at right) which causes the inputs to be played to the outputs at unit gain. You should hear a faithful, non-distorted copy of whatever is sent through the patch.</p>
<p>It is easy to get two copies of Pd running by accident; on most machines only one at a time may be inputting and outputting sound. (Some copy of Pd might have audio or MIDI devices open and prevent the copy you’re trying to use from getting access to them.) Having extra copies of Pd around will also eat CPU cycles uselessly.</p>
<p>You may be interested in getting only audio output or audio input, or you may need both to run simultaneously. By default, Pd will try to run both, but if you don’t need either input or output, you may find that Pd runs more reliably, or at least more efficiently, with the unused direction turned off. This may be specified in Pd’s command line flags or using the “audio settings” dialog panel.</p>
<p>Depending on your application you will have a more or less stringent latency requirement. Ideally, when any input (audio, MIDI, keyboard, network) is available, the outputs (in particular the audio output) should react instantly. In real life, it is necessary to buffer the audio inputs and outputs, trying always to keep some number of milliseconds ahead of real time to prepare for the inevitable occasions where the CPU runs off to service some different task from Pd. How small this latency can be chosen depends on your OS and your audio driver.</p>
<p>TIP: If Pd starts up but you get distortion or glitches in the audio output, this could be either because the “audio I/O buffer” isn’t big enough, or else because the CPU load of the patch you’re running is too great for the machine you have, or else because the ADC and DAC are out of sync or even at different sample rates. To test for the first possibility, try increasing the audio latency in the command line or the “audio settings” dialog (but see also under your OS below.) For the second, start up your favorite performance monitor program; and for the third, try starting Pd up with ADCs disabled.</p>
<p>In addition to the “test audio and MIDI” patch, the “Media” menu contains items for controlling audio and MIDI settings. The first two items, “Audio on” and “Audio off”, open or close the audio devices and start or stop Pd’s audio computation.</p>
<p>If there is a choice of audio API to make, the Media menu will display them. (On Linux, they are OSS, ALSA, and Portaudio; on Windows, you get MMIO and ASIO). On Mac the only one is Portaudio. More information about the APIs appears in the sections below.</p>
<p>Selecting an API (even if it’s the one already in use), or, alternatively, selecting “Audio Settings…” from Preferences, opens a dialog panel like this:</p>
<figure>
<img src="fig11.2.png" alt="audio settings dialog" /><figcaption>audio settings dialog</figcaption>
</figure>
<p>The exact choices you get depend on the operating system and API. The sample rate controls both audio output and input. The audio throughput delay is the nominal amount of time, in milliseconds, that a sound coming into the audio input will be delayed if it is copied through Pd straight to the output. Naturally you would like this to be as small as possible, but, depending on OS, API, and even the specific choice of audio hardware, there will be a limit to how small you can make this. You can typically get 10 msec on Linux (and lower still if you use special tricks), 30 msec on MacOS, and 60 msec on Windows (but note that there might be ways that a patient Windows user can reduce this).</p>
<p>Next you get a choice of input and output device. If you want to open more than one, hit “use multiple devices” and you’ll be allowed up to 4 in and 4 out. Each audio device is 2 channels by default, but you may specify more if your hardware supports it. Other parameters may be tweaked using the command line; see under <a href="#preferences-and-startup-options">Preferences and Startup Options</a>.</p>
<h4 id="midi" class="unnumbered">MIDI</h4>
<p>The “channel message” midi objects in Pd such as notein or pgmout will take channels 1-16 to mean the first open MIDI port, 17-32 the second one, and so on. The midiin, sysexin, midiout objects give you a separate inlet to specify which of the open MIDI port numbers you want.</p>
<p>System exclusive MIDI message input and output are theoretically supported but does not work uniformly across all operating systems..</p>
<h2 id="installing-pd-in-microsoft-windows"><span class="header-section-number">3.2</span> Installing Pd in Microsoft Windows</h2>
<p>Pd should work under any version of Windows since 95. You can download as a self-extracting archive (a “.exe” file). Run this and select a destination directory when prompted, such as “\pd” or “Program Files\pd”.</p>
<p>If for example you put Pd in “C:Program Files\pd”, the executable program will be “C:Program Files\pd\bin\pd”. You can simply adjust your path to include C:\pd\bin and then invoke “pd” in a command prompt window. You can also make a shortcut to the executable program (left-click on it and drag to the desktop, for example.)</p>
<p>Pd requires “TCP/IP networking” to be turned on. This doesn’t mean you have to be on a real network, but simply that Pd actually consists of two programs that make a “network link” (locally) to intercommunicate.</p>
<h4 id="audio-in-microsoft-windows" class="unnumbered">Audio in Microsoft Windows</h4>
<p>Pd offers both the ASIO and MMIO APIs in Windows. Which of these works better will depend on your audio hardware.</p>
<p>MIDI timing is very poor if you are using simultaneous audio input and output; if you suppress either audio input or output things will improve somewhat under Window; you can apparently get the jitter down to ~40 msec. On W95 performance is simply terrible. W98, with either audio input or output suppressed, offers fairly good MIDI timing (~5 msec jitter). The “first edition” used to crash occasionally; this might be fixed in the “second edition”.</p>
<h4 id="asio" class="unnumbered">ASIO</h4>
<p>As of version 0.35 Pd supports ASIO. Invoke Pd as “pd -asio” and, if needed, specify “-sounddev” (etc.) flags to specify which device (see “the Pd command line” below.) You can also specify a “-blocksize” different from the default (256 samples) and “-audiobuf” in milliseconds. Pd will round this down to a power of two buffers, each of “-blocksize” in sample frames.</p>
<p>TIP: Often your machine will allow you to use ASIO with built-in PC audio hardware. Sometimes it is necessary to set a ridiculously high block size for this to work (on my machine I have to set it to 4096 – about 1/10 of a second!)</p>
<p>Using MMIO I’ve been able to get very low latencies (6 msec) using M-audio PCI converters (Delta 44).</p>
<h2 id="installing-pd-in-linux"><span class="header-section-number">3.3</span> Installing Pd in Linux</h2>
<p>What to do depends on which flavor of Linux you are running (e.g., Debian or Red Hat). The instructions here should work for Pd 0.33 and up regardless of your situation. (If not, you can read the Pd mailing list archives for recent problems; if you have found a new problem you’re welcome to post it to the list.)</p>
<p>Pd is available via the package systems for some Linux distributions, but not always in the most recent version possible. It’s relatively easy to compile your own copy of Pd and that is the approach described here.</p>
<h4 id="getting-pd-as-a-.tar.gz" class="unnumbered">Getting Pd as a .tar.gz</h4>
<p>Before you start, you might want to check that you have the resources Pd needs. The main things you need are the C compiler, X windows (including the X development package for Pd to link against), TK, and the ALSA “devel” headers. It should be enough to load “tcl-devel”, “tk-devel”, and “alsa-devel” packages using yum or apt-get.</p>
<p>There are two parallel compilation setups now available. The old one is described here; as of 0.43 I still use that but I plan to discontinue this for 0.44 and start using only the new one. The following description applies to the old one. Look in the INSTALL.txt file to see how to use the new one.</p>
<p>Download Pd, perhaps from <a href="http://msp.ucsd.edu/software.html" class="uri">http://msp.ucsd.edu/software.html</a> , to file such as “pd-linux-033.tar.gz”. Open a “shell” window, cd to the directory containing the file, and type the command,</p>
<pre><code>tar xzf pd-linux-033.tar.gz</code></pre>
<p>which creates a directory named “pd”. I do this from my home directory. Next, compile it. “cd” to pd and read the INSTALL.txt, or else just cd to “pd/src” and type</p>
<pre><code>./autogen.sh
./configure
make</code></pre>
<p>You can pass flags to “configure” to customize your compilation:</p>
<p>To enable debugging (and losing code optimization) add “–enable-debug”.</p>
<p>To use Portaudio, add “–enable-portaudio”.</p>
<p>To put Pd in /usr/bin instead of /usr/local/bin, add “–prefix=/bin”.</p>
<p>Alsa and Jack support should auto-configure, but “–enable-alsa” od “–enable-jack” will force their inclusion.</p>
<p>After “make”, just type “~/pd/bin/pd” to run pd.</p>
<p>Alternatively, as superuser, you can run “make install” after “make depend” and then anyone on your system can just type “pd” to run it.</p>
<h4 id="testing-audio-and-midi" class="unnumbered">Testing Audio and MIDI</h4>
<p>Next try audio. We want to know whether audio output works, whether audio input works, and whether they work simultaneously. First run “aumix” (or any newer audio mixer app) to check audio input and output gains and learn which input (mic; line; etc.) is “recording”. Then test audio output by running</p>
<pre><code>pd -noadc</code></pre>
<p>and selecting “test audio and MIDI” from the “Media” menu. You should see a patch. Turn on the test tone and listen. Do the usual where’s-the-signal business.</p>
<p>Then quit Pd and test audio input via</p>
<pre><code>pd -nodac</code></pre>
<p>Re-open the test patch and hit “meter”; look at the levels. 100 dB is a hard clip; arrange gains so that the input signal tops out around 80 or 90, but no higher.</p>
<p>Now see if your audio driver can do full duplex by typing “pd” with no flags. If you see error messages involving /dev/dsp or /dev/dsp2, you’re probably not able to run audio in and out at the same time. If on the other hand there’s no complaint, and if the audio test patch does what you want, you might wish to experiment with the “-audiobuffer” flag to see what values of audio latency your audio system can handle.</p>
<h4 id="audio-hardware-in-linux" class="unnumbered">Audio Hardware in Linux</h4>
<p>Installing and testing audio and MIDI drivers in Linux can take days or weeks. There appears to be no single place where you can get detailed information on Linux audio.</p>
<p>There are two widely-used driver sets, called “OSS” and “ALSA”. ALSA is included in the standard Linux kernel since 2.4 or so. However, for some audio cards you can find newer versions than are included in the kernel releases. You can get ALSA from <a href="http://www.alsa-project.org/" class="uri">http://www.alsa-project.org/</a> .</p>
<p>ALSA is able to emulate OSS, so that you can usually run Pd using the “OSS” driver settings even if it’s actually ALSA that’s running.</p>
<p>By default, Pd uses ALSA. You can ask Pd to use ALSA’s OSS emulation by adding the “-oss” flag to the command line or fooling with the “media” menu items.</p>
<p>You can add ALSA devices by name on the Pd command line:</p>
<pre><code>pd -alsaadd loupgarou</code></pre>
<p>This instructs Pd to offer the ‘loupgarou’ audio device in the Audio Settings panel.</p>
<h4 id="experiences-with-particular-soudcards" class="unnumbered">Experiences with Particular Soudcards</h4>
<p>Here are some of my own experiences with sound cards so far. See also the Pd mailing list archives.</p>
<h5 id="rme-9652-hammerfall" class="unnumbered">RME 9652 (Hammerfall)</h5>
<p>This is the best PCI sound card out there; it costs around $500 and has 3 ADAT I/O ports and one SPDIF. There is a “baby hammerfall” also, which I think is the “9632.” DO NOT CONFUSE THE 9652/9632 WITH OTHER RME BOARDS WHICH MIGHT NOT WORK WITH PD.</p>
<p>The easiest way to use Hammerfall boards in Pd is via ALSA and jack; but you can use ALSA alone:</p>
<pre><code>pd -alsa -channels 26</code></pre>
<p>works for me.</p>
<h5 id="midiman" class="unnumbered">MIDIMAN</h5>
<p>Midiman sells PCI devices (delta 44, 66, 1010, and 1010LT) with between 4 and 10 channels in and out, for which there are ALSA drivers. These are also very good, and they are a bit cheaper than Hammerfalls. The driver name is “ice1712”.</p>
<h5 id="usb-sound-devices" class="unnumbered">USB sound devices</h5>
<p>Ed Kelly reports success with the Lexicon series of USB 1.0 devices (e.g., the Omega Studio; apparently 4 channels in and 4 out). Also known to work well is the Edirol box (2 channels in and out).</p>
<p>As of Sept. 2011, the only multi-channel USB device I’ve been able to use with Pd is the Native Instruments Traktor Audio series. (I have the Audio Traktor 10 which does indeed get 10 discrete channels in and out; the box is designed for turntables and the I/O is all RCA. I haven’t yet tested whether the inputs are RIAA equalized or flat. To run this device you’ll need to compile and install an ALSA snapshot from at least September 2011. This won’t start showing up in Linux distros for at least some months.</p>
<p>The Alsa developer list is reporting progress on the M-audio Ultra series, which goes up to 6 in and out (analog) with 2 more as SP/DIF. Things work OK for input or output separately but “full duplex” (in and out simultaneously) has sync problems.</p>
<h2 id="installing-pd-in-macos"><span class="header-section-number">3.4</span> Installing Pd in macOS</h2>
<p>Pd version 0.35 and up support macOS. Recent versions of Pd require 10.6 or up.</p>
<p>To install Pd you can always download the sources and compile them yourself, or (easier) just download the Mac binary from the download page: <a href="http://msp.ucsd.edu/software.html" class="uri">http://msp.ucsd.edu/software.html</a> or from the Pure Data community site: <a href="https://puredata.info" class="uri">https://puredata.info</a> This is in the form of a compressed tar.gz archive; just double click on it to extract the Pd application. Open this and you should be running.</p>
<p>You might get various warnings about Pd trying to open an internet port. This is normal although some system administrators will prevent you from doing this (in which case you can’t run Pd on that machine).</p>
<h4 id="to-install-on-macos-from-source" class="unnumbered">To Install on macOS from Source</h4>
<p>Whether you’ve downloaded the source or the “package” you can always compile Pd for yourself, whether to make your own improvements, or possibly so that you can get the newest version before it shows up compiled for macOS.</p>
<p>To be able to compile Pd, you must have Tcl/Tk installed in the standard places. I think this is true for all reasonably recent releases of macOS.</p>
<p>Overview: Just as for Linux, extract pd-#.#.#.tar.gz into a directory such as ~/pd-0.47-1, cd to ~/pd-0.47-1, run:</p>
<pre><code>./autogen.sh
./configure
make</code></pre>
<p>Then type ~/pd-0.47-1/bin/pd to a shell and enjoy!</p>
<p>Detailed build instructions can be found in the INSTALL.txt included with the Pd source distribution.</p>
<p>If you wish you can put a line such as,</p>
<pre><code>alias pd ~/pd/bin/pd</code></pre>
<p>in the file, ~/.tcshrc, so that you can later just type “pd” to a shell. (The shell only reads the ~/.tcshrc file on startup, so this won’t take effect in any existing shells unless you specially type</p>
<pre><code>source ~/.tcshrc</code></pre>
<p>to them.)</p>
<p>Follow the general directions above for testing audio and/or MIDI as needed.</p>
<p>To get MIDI working, you have to do the macOS magic to get a USB MIDI interface installed. I’ve seen this done with Midisport devices and I think you just download the macOS driver and follow directions.</p>
<h2 id="preferences-and-startup-options"><span class="header-section-number">3.5</span> Preferences and Startup Options</h2>
<p>Pd’s behavior may be customized to instruct it where to find files, which audio devices to open, what font size to use, and so on. Most of these may also be changed using the various dialogs you can open from Pd’s menus. Others take effect only when Pd starts up; some of these appear on the “startup” dialog and some of them, too cranky to put in a GUI, must be typed as <em>command line arguments</em>.</p>
<p>In addition to the Audio and MIDI settings (see <a href="#audio-and-midi">Audio and MIDI</a>), you can customize font size (from the “edit” menu), directories to search for files (see <a href="#how-pd-searches-for-files">How Pd Searches for Files</a>), and additional startup parameters described below.</p>
<p>All of these settings may be saved automatically between Pd sessions. It is also possible to specify settings directly via the <em>command line</em> . (A third mechanism, using configuration files, is deprecated and isn’t described here.) The Pd command line is described in the next section. Command line settings, if given, each override the corresponding setting that was saved from Pd.</p>
<p>The startup settings (i.e., those that take effect only when Pd is started) are controlled using the “startup…” dialog from the File menu. The dialog appears as follows:</p>
<figure>
<img src="fig11.3.png" alt="startup dialog" /><figcaption>startup dialog</figcaption>
</figure>
<p>The slots at top each specify a binary “library” for Pd to load on startup. These may be for Gem, pdp, zexy, iemlib, cyclone, and so on. Typically, a single binary object (an “extern”) is left for Pd to load automatically; startup library loading is appropriate for collections of many objects specified by a single binary library.</p>
<p>The “defeat real-time scheduling” control, if enabled, makes Pd run without its usual effort to become a real-time process (whatever this means in the operating system you are using.) In Unix, Pd must usually be setuid to allow real-time scheduling at all.</p>
<p>The “startup flags” allow you to add to Pd’s command line on startup. This is specified as described below, except that the initial word, “pd”, is understood. For example, putting “-rt” in this field sets real-time scheduling; “-sleepgrain 1” sets the sleep grain to 1 (see under MIDI below), and typing “-rt -sleepgrain 1” does both.</p>
<p>You may save the current settings for future Pd sessions with the “save all settings” button; this saves not only the path but all other settings as well.</p>
<h3 id="command-line-arguments"><span class="header-section-number">3.5.1</span> Command Line Arguments</h3>
<p>Pd may be run as a “command line” program from your “terminal emulator,” “shell,” or “MSDOS prompt.” In Windows, if Pd is started using a “shortcut” it is also run from a command line which you can edit using the “properties” dialog for the shortcut. In any operating system, Pd can be called from a script (called a <em>batch file</em> on Windows or a <em>shell script</em> on macOS or Unix). The command line is just a line of text, which should be of the form:</p>
<pre><code>pd [options] [patches to open]</code></pre>
<p>although you may have to specify a path (such as “~/pd/bin/pd” or “C:\program files\pd\bin\pd”) so your command interpreter can find Pd. Possible options include:</p>
<pre><code>audio configuration flags:
-r &lt;n&gt;           -- specify sample rate
-audioindev ...  -- sound in device list; e.g., &quot;2,1&quot; for second and first
-audiooutdev ... -- sound out device list, same as above 
-audiodev ...    -- specify both -audioindev and -audiooutdev together
-inchannels ...  -- number of audio in channels (by device, like &quot;2&quot; or &quot;16,8&quot;)
-outchannels ... -- number of audio out channels (by device)
-channels ...    -- specify both input and output channels
-audiobuf &lt;n&gt;    -- specify size of audio I/O buffer in msec
-blocksize &lt;n&gt;   -- specify audio I/O block size in sample frames
-sleepgrain &lt;n&gt;  -- specify number of milliseconds to sleep when idle
-nodac           -- suppress audio output
-noadc           -- suppress audio input
-noaudio         -- suppress audio input and output (-nosound is synonym) 
-listdev         -- list audio and MIDI devices

(linux specific audio:)
-oss            -- use ALSA audio drivers
-alsa           -- use ALSA audio drivers
-pa             -- use portaudio (experimental version 19)
-alsadev &lt;n&gt;    -- obsolete: use -audiodev
-32bit          -- (probably obsolete) -- use 32 bit OSS extension
-alsaadd &lt;dev&gt;  -- add a device to the ALSA device list

(Windows specific audio:)
-mmio           -- use MMIO drivers and API
-asio           -- use ASIO drivers and API

MIDI configuration flags:
-midiindev ...   -- midi in device list; e.g., &quot;1,3&quot; for first and third
-midioutdev ...  -- midi out device list, same format
-mididev ...     -- specify -midioutdev and -midiindev together
-nomidiin        -- suppress MIDI input
-nomidiout       -- suppress MIDI output
-nomidi          -- suppress MIDI input and output
-alsamidi        -- use ALSA midi API

general flags:
-path &lt;path&gt;     -- add to file search path
-nostdpath       -- don&#39;t search standard (&quot;extra&quot;) directory
-stdpath         -- search standard directory (true by default)
-helppath &lt;path&gt; -- add to help search path
-open &lt;file&gt;     -- open file(s) on startup
-lib &lt;file&gt;      -- load object library(s)
-font &lt;n&gt;        -- specify default font size in points
-verbose         -- extra printout on startup and when searching for files
-version         -- don&#39;t run Pd; just print out which version it is
-d &lt;n&gt;           -- specify debug level
-noloadbang      -- suppress all loadbangs
-stderr          -- send printout to standard error instead of GUI
-nogui           -- suppress starting the GUI
-guiport &lt;n&gt;     -- connect to pre-existing GUI over port &#39;n&#39;
-guicmd &quot;cmd...&quot; -- substitute another GUI program (e.g., rsh)
-send &quot;msg...&quot;   -- send a message at startup (after patches are loaded)
-rt or -realtime -- use real-time priority (needs root privilege)
-nrt             -- don&#39;t use real-time priority
-nosleep         -- never relinquish CPU (only for multiprocessors!)</code></pre>
<p>Here are some details on some of the audio, MIDI, and scheduler options (but see also the next section on file management.)</p>
<h4 id="multiple-devices" class="unnumbered">Multiple Devices</h4>
<p>You can specify multiple MIDI input and output devices. For example, “pd -midiindev 3 -midioutdev 4,2” asks for the third MIDI input device and the fourth and second MIDI output device.</p>
<p>Audio device selection is similar, except that you can also specify channels by device: “-audioindev 1,3 -inchannels 2,8” will try to open device 1 (2 channels) and device 3 (8 channels.)</p>
<h4 id="sample-rate" class="unnumbered">Sample Rate</h4>
<p>The sample rate controls Pd’s logical sample rate which need not be that of the audio input and output devices. If Pd’s sample rate is wrong, time will flow at the wrong rate and synthetic sounds will be transposed. If the output and input devices are running at different rates, Pd will constantly drop frames to re-sync them, which will sound bad. You can disable input or output if this is a problem.</p>
<h4 id="audio-buffer-size-and-block-size" class="unnumbered">Audio Buffer Size and Block Size</h4>
<p>You can specify an audio buffer size in milliseconds, typically between 10 and 300, depending on how responsive your OS and drivers are. If this is set too low there will be audio I/O errors (“data late”). The higher the value is, on the other hand, the more throughput delay you will hear from the audio and/or control inputs (MIDI, GUI) and the audio coming out.</p>
<p>You can also specify the audio block size in sample frames. This is 64 by default (except for MMIO for which it’s 256), and may be 64, 128, or 256.</p>
<h4 id="midi-and-sleepgrain" class="unnumbered">MIDI and Sleepgrain</h4>
<p>In Linux, if you ask for “pd -midioutdev 1” for instance, you get /dev/midi0 or /dev/midi00 (or even /dev/midi). “-midioutdev 45” would be /dev/midi44. In Windows, device number 0 is the “MIDI mapper”, which is the default MIDI device you selected from the control panel; counting from one, the device numbers are card numbers as listed by “pd -listdev.”</p>
<p>The “sleepgrain” controls how long (in milliseconds) Pd sleeps between periods of computation. This is normally the audio buffer divided by 4, but no less than 0.1 and no more than 5. On most OSes, ingoing and outgoing MIDI is quantized to this value, so if you care about MIDI timing, reduce this to 1 or less.</p>
<h2 id="how-pd-searches-for-files"><span class="header-section-number">3.6</span> How Pd Searches for Files</h2>
<p>Pd has a search path feature; you specify the path on the command line using the “-path” option. Paths may contain any number of files. If you specify several files in a single “-path” option they’re separated by colons in Unix or semicolons in Windows.</p>
<p>You can see and edit the path while Pd is running using the “path…” item in the “File” menu:</p>
<figure>
<img src="fig11.4.png" alt="startup dialog" /><figcaption>startup dialog</figcaption>
</figure>
<p>The path must be correctly set before you load a patch or it may fail to find abstractions, etc., that are needed to construct the patch. When Pd searches for an abstraction or an “extern” it uses the path to try to find the necessary file. The “read” messages to qlists and arrays (aka tables) do this too.</p>
<p>If “use standard extensions” is enabled, the usual “extras” directory is also searched. This contains standard external objects like “expr” and “fiddle”, and perhaps much more depending on the distribution of Pd you’re using.</p>
<p>You may save the current settings for future Pd sessions with the “save all settings” button; this saves not only the path but all other settings as well.</p>
<p>Path entries may be relative to the patch directory; for instance, if your path has an item, “../sound”, and your patch is in “my stuff/all mine”, then Pd will look in “my stuff/sound”. Spaces should be OK in the path to the patch, but not in the path entry (../sound) itself. This is useful if you have a patch and supporting files (even a supporting snapshot of pd) that you want to distribute or carry around together.</p>
<p>Regardless of path, Pd should look first in the directory containing the patch before searching down the path. Pd does not automatically look in the <em>current directory</em> however; to enable that, include “.” in the path. The “extra” directory, if enabled, is searched last.</p>
<p>Filenames in Pd are always separated by (Unix-style) forward slashes, even if you’re on Windows (which uses backslashes). This is so that patches can be ported more easily between operating systems. On the other hand, if you specify a filename on the command line (as in “pd -path c:\pdlib”) the file separator should agree with the operating system.</p>
<p>If a filename specified in a patch has any “/” characters in it, the “path” is not used; thus, “../sounds/sample1.wav” causes Pd only to look relative to the directory containing the patch. You may also invoke externs that way.</p>
<p>As of version 0.35, there may be spaces in the path to Pd itself; also, the “openpanel” and “savepanel” objects can handle spaces. Spaces in the path should work as of version 0.38.</p>
<hr />
<h1 id="writing-pd-objects-in-c"><span class="header-section-number">4</span> Writing Pd Objects in C</h1>
<p><a href="#TOC">back to table of contents</a></p>
<p>You can write your own objects that you and others can use in their Pd applications. You can write them in C or (if you’re smart and brave) in C++ or FORTRAN.</p>
<h4 id="how-externs-are-loaded" class="unnumbered">How Externs Are Loaded</h4>
<p>Whenever you type the name of an object (into an “object” text box) that Pd doesn’t yet know about, Pd looks for a relocatable object file, named, for instance, “profile.pd_irix5”. Pd looks first in the directory containing the patch, then in directories in its “path.” Pd will then add whatever object is defined there to its “class list,” which is the set of all Pd classes you can use. If all this works, Pd then attempts again to create the object you asked for, this time perhaps successfully. There is no difference between an object defined this way and an object built into Pd.</p>
<p>Once you load a new object into Pd, it’s there for the duration of your Pd session. If you load another Pd document which supplies a different version of some Pd object, the object won’t be updated. IF you’re working on a new object and decide to change it, you have to exit and re-enter Pd to get the change to take.</p>
<p>In the “externs” subdirectory of the documentation you can find simple examples of “externs” with their source code and test patches; there are many other on the web (see <a href="#other-resources">Other Resources</a>).</p>
<p>Iohannes Zmoelnig has written an excellent guide to writing externs at <a href="http://pdstatic.iem.at/externals-HOWTO/" class="uri">http://pdstatic.iem.at/externals-HOWTO/</a> .</p>
<hr />
<h1 id="current-status"><span class="header-section-number">5</span> Current Status</h1>
<p><a href="#TOC">back to table of contents</a></p>
<p>This section tracks changes in Pd’s current implementation.</p>
<h2 id="release-notes"><span class="header-section-number">5.1</span> Release Notes</h2>
<h3 id="section" class="unnumbered">0.48-0</h3>
<p>It’s possible to save and recall “settings” to files, and/or to erase system settings. On Pcs, the settings are now stored in the “user” resource area (before, it was per-machine, and users who weren’t administrators apparently couldn’t save their settings.)</p>
<p>On the first startup, Pd queries the user as to whether to create a directory such as ~/Doculemnts/Pd and set path to point there. Many updates were also made to the “path” dialog and deken to better integrate downloading stuff and path maintanance.</p>
<p>The expr family (expr, expr~, fexpr~) got an update from Shahrokh Yadegari, and the help file was reorganized and updated by Alexandre Porres. Many more math functions are supported, and the parser was updated so that expressions using “if” skip evaluating the argument that isn’t used. In an older improvement that wasn’t reported here, expr can read and write variables stored in “v” objects.</p>
<p>New “fudiparse”, “fudiformat” objects.</p>
<p>New “list store” object for faster and easier concatenation and splitting apart of lists.</p>
<p>New notification outlet in “text define” so the patch can know when the text is changed.</p>
<p>New “text insert” object.</p>
<p>“delwrite~” now has a “clear” message.</p>
<p>“declare -path” inside abstractions was changed so that, if the declaration isn’t an absolute filename, it’s relative to the abstraction’s directory, not to the owning patch’s directory. This might be considered an incompatible change; but since the situation with paths declared inside abstractions has always been so confused, I think nobody will have got away without editing patches that relied on it as things changed in the past.</p>
<p>But the biggest changes are under the hood. Pd now can manage more than one running instance, so that it is possible to make plug-ins of various sorts out of Pd and they can coexist with each other. This will allow people to write much better VST plug-ins in Pd. I’m grateful to Carlos Eduardo Batista for much help on this.</p>
<p>The Pd API allows starting and/or shutting down the GUI dynamically while Pd is running.</p>
<p>Another internal change: the pd~ object now communicates with sub-processes in binary by default. This increases the numerical accuracy of signal passing (it should be exact now) and makes the passing back and forth of audio signals much more efficient.</p>
<p>Thanks to much effort by Dan Wilcox and Iohannes Zmoelnig, the compile-and-build system is much improved, especially for Macintosh computers. One visible effect is that language support is finally working in the compiled versions on msp.ucsd.edu.</p>
<h3 id="section-1" class="unnumbered">0.47-1</h3>
<p>Improvements to deken plug-in (“find externals” menu item). Now unzipping works automatically in windows.</p>
<p>improved “clone” argument parsing and added option to suppress numbering of clones as first argument</p>
<p>fixed a bug in initbang (didn’t work in subpatches)</p>
<p>“improved” zoom-in menu binding again (now ‘+’ or ‘=’ zooms in).</p>
<p>restored a function needed by GUI externs such as ‘knob’</p>
<h3 id="section-2" class="unnumbered">0.47-0</h3>
<p>The “deken” plug-in is integrated into the Pd help menu - you can download and install Pd libraries using the “Find Externals” menu command.</p>
<p>New clone object that opens multiple copies of an abstraction and routes messages and signals to/from them, for making banks of voices or whatnot</p>
<p>“Zoom” feature for dealing with high-resolution displays. IEM GUIs are only somewhat dodgily handled (font sizes of labels aren’t managed well).</p>
<p>Controllable font sizes for menus and dialogs: setting the “pd window” font size also sets font sizes for menus/dialogs.</p>
<p>The expr, expr~, and fexpr~ objects are included in Pd proper, not loaded as externs as before. This reflects their new license (lgpl) and should allow them to be used in IOS apps via libpd. Shahrokh Yadegari has updated the source and made manifold improvements in the objects. Notably, they now allow access to variables in Pd defined via the “value” object.</p>
<p>Backward messaging to netsend now works in UDP as well as TCP.</p>
<p>Dialogs now work more Apple-ishly (changes taking place without the need to hit an “apply” button in many cases). Thanks to danomatica.</p>
<p>API support for “initbang” and “closebang” objects (from IEM library I think, but anyhow you can now get them in Pd Vanilla via deken (help menu “Find externals”).</p>
<p>“Declare” object path settings now take effect immediately when you edit the declare object.</p>
<p>(Iohannes) Abstractions, externs, and stuff written in other languages (python, Lua, etc) are now loaded logically, that is, if you have one patch that loads an external named X, you can still load abstractions named X in other patches. Miller now officially Does Not Know How This Works (DNKHTW).</p>
<p>Many bug fixes.</p>
<h3 id="section-3" class="unnumbered">0.46-7</h3>
<p>Fixed non-working declare -stdpath on windows</p>
<p>Fixed bug in which [array min/max] ignored onset argument</p>
<p>Fixed jack audio back-ed not to auto-start the daemon</p>
<p>Various compilation and architecture fixes</p>
<h3 id="section-4" class="unnumbered">0.46-6</h3>
<p>fixed bug selecting and saving/restoring MIDI output devices.</p>
<p>new bob~ object (Moog filter emulation) in extra. (This was intended for 0.47 but it was easiest to leave it in place for this bug-fix release).</p>
<h3 id="section-5" class="unnumbered">0.46-5</h3>
<p>fixed crasher bug (cutting all text in an object then cutting again to delete the object sometimes crashed Pd)</p>
<p>added two checks to re-sort DSP when arrays are created or renamed</p>
<p>patched Makefile.am for correct list of objects (fixes broken make install)</p>
<p>fixed configure.ac to use fftw3</p>
<h3 id="section-6" class="unnumbered">0.46-4</h3>
<p>fixed crasher bug in 0.364-3</p>
<h3 id="section-7" class="unnumbered">0.46-3</h3>
<p>changed priority settings to agree with new restrictions on linux – apparently non-root processes can’t set to any of the top 5 or so priority levels.</p>
<p>three minor fixes for array graphics</p>
<p>new “set” messages and wildcard ‘-’ template names for “set”, “get”, “elem”, “setsize”, “getsize”, and “append” objects</p>
<p>updated Makefile.am to reflect new and corrected help file names</p>
<p>took out bogus object in rev3~</p>
<h3 id="section-8" class="unnumbered">0.46-2</h3>
<p>fixed bug calculating widths of pre-version-0.39 GOPs</p>
<p>added a pd_getdspstate() function to replace dspstate external variable which was moved to the pd instance structure. Strictly speaking this doesn’t restore binary compatibility but I believe only one extern writer was using dspstate (and he’s actively maintaining the externs) so I think this is OK.</p>
<p>The old standard-error “realtime priority” debug message under linux only appears if Pd is started ‘verbose’. OTOH, if realtime priority-setting fails, the user is notified in the Pd window.</p>
<p>fixed debian compile bug.</p>
<p>fixed “array” object to allow a size of 1.</p>
<h3 id="section-9" class="unnumbered">0.46-1</h3>
<p>Bug fix in oscparse (truncated some messages)</p>
<p>Fixed ALSA (on linux) to open devices with fewer channels than requested</p>
<p>Other small bug fixes.</p>
<h3 id="section-10" class="unnumbered">0.46-0</h3>
<p>The biggest change in 0.46 was to make possible loading multiple Pd instances into a single address space. The instances share symbols (there are no namespaces) but have different schedulers, DSP networks, and MIDI I/O structures. In principle it should be possible to design Pd plug-ins that don’t interact with each other using libpd.</p>
<p>New oscparse and oscformat objects to facilitate OSC I/O. No support for streaming; UDP only so far.</p>
<p>At long last, Pd vanilla compiled for Macintosh computers is distributed with Jack support.</p>
<p>Bug fixes to IEM GUIs: sliders and radio buttons pass floating-point numbers through without limiting them to the GUI’s range or resolution. Also, the toggle no longer resets its “value” (the nonzero number it outputs) when receiving numbers in messages. Set compatibility to 0.45 or earlier to get the old behavior (using “pd compatibility” message or a startup flag).</p>
<p>Audio and MIDI settings are now saved by device name, not number, so that, hopefully, adding or reordering devices doesn’t change the devices Pd opens as saved in preferences. You can also specify them by name on Pd’s command line with new flags such as “-audioadddev”.</p>
<p>New [text tosymbol] and [text fromsymbol] to allow string manipulation.</p>
<p>Netsend/netreceive can send messages bidirectionally if using TCP protocol.</p>
<p>Added some startup flags (mostly from Iohannes) - -nostderr, etc. Also added a flag (-noautopatch) to suppress autoconnect.</p>
<p>improved the sound of rev2~ and rev3~ reverberators</p>
<p>Made stdlib and stdpath flags and declarations follow standard search paths (Iohannes again).</p>
<p>Dozens of small bug fixes.</p>
<h3 id="section-11" class="unnumbered">0.45-3</h3>
<p>fixed a bug pasting text into Pd and an audio problem in Mac OSX (non-default sample rates with built-in hardware needed huge buffering)</p>
<h3 id="section-12" class="unnumbered">0.45-1,2</h3>
<p>fixed bug in which backspace to dialog windows got sent to the last edited patch</p>
<h3 id="section-13" class="unnumbered">0.45</h3>
<p>multi-purpose “array” and “text” objects. “Array” is a more general replacement for the “table”, “tabread” and “tabwrite” objects. “text” is sort of like Max’s “coll” but simpler and hopefully more powerful. “text”s are also available as fields in data structures.</p>
<p>“tempo” messages for delay, metro, timer, and “test sequence”. In particular you can specify or measure time in samples, but you can also use this for changing the speed of an ensemble of delay loops while keeping them in sync.</p>
<p>binary netsend/netreceive (so you should no longer need an extern for OSC).</p>
<p>pd~ (multiprocessing) works on windows and is less likely to deadlock although not yet perfect.</p>
<p>Objects/messages/comments have settable box widths. By default they’re auto, but you can change that by dragging on the right-hand-side border. You can set it back to the default just by dragging ot to whatever width the default would have been. If a box’s width isn’t “auto” and you open the patch back in Pd version 0.44 you’ll see a warning; if you open it in earlier versions you’ll get pages of error messages but no real harm. You can open and save a patch in 0.44 if you’d like to reset all box widths to auto.</p>
<p>The Pd window now tells you whether PD has an audio device open or not, and various error and status messages that used to go to standard error now appear on the Pd window (this improvement was way overdue!)</p>
<p>Fixed hangups exiting when using jack.</p>
<p>Got ASIO working again on PC (it was apparently broken; I don’t know for how long.)</p>
<p>Various other small improvements in audio and midi handling: Notably, except when using Jack, Pd doesn’t open audio on startup; sometimes you want to get to the dialog panel before audio ever starts (for instance, on Mac, to prevent Pd from hanging when someone walks in the building with an apple TV – gee, thanks, Apple!)</p>
<p>Took a patch from Iohannes Zmoelnig to make Pd source conform to strict aliasing rules. The vanilla release is still compiled with -fno-strict-aliasing but this will be dropped after more testing.</p>
<p>The vanilla release now includes a 64 bit binary for MacOS. This is a separate app and it won’t load externs that haven’t been compiled with -arch x86_64. (Externs can be future-proofed by including both i386 and i86_64 binaries by compiling with -arch i386 -arch x86_64).</p>
<p>The soundfiler now writes correct sample rate to AIFF files (was previously hard-coded to 44100). Still no way to detect the sample rate of a file when reading it.</p>
<h3 id="section-14" class="unnumbered">0.44-3</h3>
<p>Fix hip~ AC gain once more (still didn’t have it right).</p>
<p>Small improvements in MIDI handling (midiin and sysexin device numbering; two linux-specific fixes).</p>
<p>“open recent” fixed for linux</p>
<h3 id="section-15" class="unnumbered">0.44-2</h3>
<p>Fix underflow problem for Raspberry Pi (no effect on other platforms)</p>
<h3 id="section-16" class="unnumbered">0.44-1</h3>
<p>Fixed default API settings to prefer MMIO over ASIO for MS Windows and anything over jack (so that first-time users are most likely to get audio out).</p>
<h3 id="section-17" class="unnumbered">0.44</h3>
<p>many, many changes (hopefully improvements) in audio and MIDI I/O and in scheduling.</p>
<p>got rid of the “old” (cd src; ./configure etc) build system. src now contains fallback makefiles for gnu/linux and mac as well as windows. But the “official” way to build Pd is now to invoke automake.</p>
<p>better handling of reading and writing files with non-ASCII filenames in Microsoft Windows.</p>
<p>fixed a bug in hip~ (incorrect gain; noticeably different when the cutoff frequency is set about 5K or higher.) To get the old behavior you can set Pd to be 0.43 compatible; see the hip~ help window for details.</p>
<p>inlet~ and outlet~, if configured to do upsampling, now use sample/hold instead of zero padding by default; arguably this is a bug fix as the DC gain isn’t one for zero padding. Also undoable by setting compatibility to 0.43.</p>
<h3 id="section-18" class="unnumbered">0.43.2-3</h3>
<p>bug fixes, notably allowing an increase in incoming MIDI bandwidth.</p>
<p>added an “f” message to canvases which might in the future be used to specify formatting info (width; font size) box by box.</p>
<h3 id="section-19" class="unnumbered">0.43.1</h3>
<p>bug fix: in “perf mode” (having sent pd the “perf” message to prevent undesired patch closure) Pd crashed (oops!) when one asked for the patch to close after all.</p>
<p>Improvements to Mac version of bonk~ – “learn” parameter handled correctly and compilation fixes.</p>
<p>Default font size is the same on all platforms.</p>
<p>Bug fixes reading and writing AIFF files, particularly 24 bit ones</p>
<p>“edit mode” menu checkbox should work now.</p>
<p>X Pasting text into boxes now works in linux.</p>
<p>fixed bug that hung Pd when closing more than one pd~ subpatch out of order.</p>
<p>fixed segfault if DSP loop found and main patch had signal inlets/outlets</p>
<p>miscellaneous cleanups.</p>
<p>STILL BUGGY: when you change the contents of a graph-on-parent subpatch the old stuff often doesn’t get erased correctly.</p>
<h3 id="section-20" class="unnumbered">0.43</h3>
<p>Completely new TCL front end, thanks to Hans-Christophe Steiner, Iohannes Zmoelnig, and others.</p>
<h3 id="section-21" class="unnumbered">0.42-5</h3>
<p>broken abs~ and log~ fixed</p>
<p>pd~ -ninsig 0 hang fixed</p>
<p>testtone updated and 16ch version added</p>
<p>lrshift~ bug fix</p>
<p>32 channel limit removed for portaudio (ASIO/Windows and Mac)</p>
<h3 id="section-22" class="unnumbered">0.42-4</h3>
<p>added -noautopatch startup argument to defeat auto-connecting to new objects (some folks like it and others hate it)</p>
<p>gfxstub bug fix</p>
<p>fixed crash on deleting “s” objects with no args</p>
<p>re-fixed seteuid(0 problem</p>
<p>fixed crash on “find $1” (still not useful though)</p>
<h3 id="section-23" class="unnumbered">0.42.1-3</h3>
<p>Bug fix on Windows(cancelling window close deactivated window).</p>
<p>Bug fix running Pd from command line in MacOS.</p>
<p>“Select all” fixed to select none if everything already selected.</p>
<h3 id="section-24" class="unnumbered">0.42</h3>
<p>The ‘struct’ object can now be used to catch a small but growing variety of events (mouse clicks on data, selection/deselection).</p>
<p>The ‘tabread4~’ object was fixed to allow message-time onset into the table. This makes it possible (at last) to use tabread4~ effectively with large (&gt; 1 second) samples. New help files 3.audio.examples/B15 and B16 show how to use it. It’s not pretty but it’s at least possible.</p>
<p>Took patches from Iohannes Zmoelnig to make Pd work when compiled to use 64-bit floating-point audio. I didn’t test this; doubtless there will still be some problems. (This isn’t the same thing as running in ‘64 bit mode’ which already works fine and is the default when compiled on a 64-bit linux machine.)</p>
<p>New objects in extra, ‘pd~’, and ‘stdout’, allow running a separate Pd instance in a sub-process. Theoretically this should make it possible to use multiprocessors efficiently in {d. It’s still somewhat experimental; it might not work well to pass large numbers of messages and/or signals back and forth.</p>
<p>A -batch flag allows Pd to be run efficiently from scripts. You should probably also specify -nosound. With these flags Pd runs as quickly as it can without waiting for real time. It’s up to the patch to arrange to exit at the appropriate time via a ‘pd quit’ message.</p>
<p>Large and sweeping improvements have been made to bonk~ and sigmund~. The new bonk~ features are documented in its help window; sigmund~ works better but has the same old features.</p>
<p>Closing and quitting Pd now act more politely, querying the user only if there are edited windows. There’s also a query if the user types into a box holding an edited abstraction to prevent the changes from getting lost accidentally. A new ‘pd perf’ message re-enables the old “really close this window” behavior, which is appropriate for performances where you don’t want the wrong keyclick to stop Pd brusquely.</p>
<p>The process of reloading multiple copies of a modified abstraction was sped up.</p>
<p>The ‘find’ dialog permits searching for substrings. This is useful for strings containing “$” arguments, where it’s unclear what ‘find’ does or should do.</p>
<p>New pow~, log~, exp~, abs~, and ‘wrap’ objects.</p>
<p>The ‘print’ object takes “-n” flag to suppress “print:” in output</p>
<p>“clear” button in Pd output window</p>
<p>“.pdrc” loading suppressed if pd is started with “-noprefs”.</p>
<p>Bug fix in pipe object: if sending a list to pipe, it didn’t update the delay time when asked to.</p>
<p>Binbufs fixed to handle arbitrary length messages. (This fixed a problem reloading data structures with huge arrays).</p>
<p>various fixes to</p>
<h3 id="section-25" class="unnumbered">0.41-3,4</h3>
<p>2 fixes for PC: no bonk~, and the audio device selection dialogs didn’t show all the devices.</p>
<h3 id="section-26" class="unnumbered">0.41-2</h3>
<p>More bug fixes: large netsends dropping messages, and crash bug when turning DSP on and off repeatedly in MS windows</p>
<h3 id="section-27" class="unnumbered">0.41-1</h3>
<p>Fixed a startup problem for Mac OSX 10.5.1 (other platforms should not be affected)</p>
<h3 id="section-28" class="unnumbered">0.41</h3>
<p>Pd may be compiled in 64 bit address spaces; this is well tested on linux and at least seems to work on Microsoft and MacOS. On linux, in fact, if you compile Pd in a 64-bit version of the OS it’s automatically in the 64 bit address space.</p>
<p>In linux, a “-nosleep” flag causes Pd to poll instead of sleeping as it waits for dac and adc; this is useful on multiprocessors when you don’t mind having Pd occupy 100% of one processor and want to get latency as low as possible. (If you don’t use this, latency on multiprocessors - Intel Core 2 at least - is much worse for some reason than it is on uniprocessors.) It’s “experimental” but I use it every day.</p>
<p>added an experimental callback scheduler. This might reduce latency in MacOS and/or Microsoft, although I haven’t seen that actually happen yet.</p>
<p>removed limitation on huge messages from text files; this prevented long “data” arrays from reloading from disk correctly.</p>
<p>fixed crash bug closing patches with open GOPs.</p>
<p>changed selection strategy so that, right after duplicating a collection of objects, clicking tends to select an already-selected object.</p>
<p>the cursor changes slightly more appropriately when switching between edit to run modes.</p>
<p>got really confused about the proper role of “declare ’path” in abstractions; for the moment they are ignored. I the future, it may be worthwhile to allow them but to have them act only locally to the abstraction; but this might mean a lot more computation overhead when opening files.</p>
<p>limited window sizes to that of the screen (otherwise, on Mac OS, it’s impossible to resize them.)</p>
<p>fixed “startup” dialogs to allow unlimited “path” and “lib” entries</p>
<p>started, but didn’t finish, the process of getting Pd to compile with t_float as 64 bits. This would slow Pd down but improve tabread4~’s accuracy.</p>
<p>made IEM Guis respect “-font” flag and friends. New startup flags: “-font-face” (badly named); “-font-size” synonym of “-font”. (Large patch from HC).</p>
<p>String overflow protection here and there.</p>
<p>migrated to “.net” compiler (“VC 2005”, a free download).</p>
<h3 id="section-29" class="unnumbered">0.40-1</h3>
<p>Fixed “declare” which wasn’t working properly yet in 0.40-0, and made more objects (notably “soundfiler”) respect “declared” paths. Path entries are relative to the parent patch. Declares inside abstractions are ignored.</p>
<p>“drawnumbers” are draggable now, even if they’re in arrays.</p>
<p>Bug fix opening “html” help from windows.</p>
<p>Changed MACOSX to __APPLE__ in 4 places.</p>
<h3 id="section-30" class="unnumbered">0.40</h3>
<p>A new object, “declare”, allows patches to control where Pd looks for resources such as abstractions and libraries.</p>
<p>Symbols can now be built using multiple dollar sign variables, as in “$1-$2.$3”. Meanwhile, naming subpatches as in “pd $1-foo” now seems to work correctly.</p>
<p>The switch~ object takes a “bang” message to compute one block of DSP on demand. Also, block sizes are no longer required to be powers of two (although reblocking only works between powers of two.)</p>
<p>Externs may have characters in their names that aren’t part of valid C variable names (i.e., outsize the range a-z,A-Z,0-9, _).</p>
<p>Openpanel and savepanel take an argument to set the initial directory to search.</p>
<p>Support for large (&gt;2G) soundfiles, in operating systems that offer it.</p>
<p>Text copy/paste fixed (I hope) for Macintosh</p>
<p>Intel Mac binaries. New naming scheme for externs to allow disambiguation (although Pd falls back to the old names for compatibility.)</p>
<p>Templates can get notified when data are selected/deselected. I want to provide this for mouse actions on locked canvases too, but haven’t yet.</p>
<p>Characters like “\”, “[”, etc., typed into dialogs for labelling number boxes or other GUI objects, get filtered out so that they at least don’t hang Pd up.</p>
<p>Drawcurve (and the others, filledcurve, drawpolygon, filledpolygon) have a new “-x” flag that inhibits a scalar getting selected when the curve is clicked on. This is useful for drawing stuff in the background (grids, clefs, etc).</p>
<p>6 or so patches adopted from sourceforge.</p>
<p>A “list length” object</p>
<p>IEM Gui labels (except for the VU meter) default to 10 point fonts (typically 8 before).</p>
<p>“send” without an argument gets an inlet to set the destination</p>
<p>A -noprefs flag defeats loading startup preferences. This gives you a way to rescue things if Pd’s settings somehow crash Pd on startup.</p>
<p>tabwrite~ takes a “start” message to allow writing into the middle of the table.</p>
<h3 id="section-31" class="unnumbered">0.39.2</h3>
<p>Bug fixes: memory leak in OSX version; problem printing numbers as symbols.</p>
<h3 id="section-32" class="unnumbered">0.39.1</h3>
<p>Bug fixes: compatibility problems with older version of TK</p>
<h3 id="section-33" class="unnumbered">0.39.0</h3>
<p>At the source level, “regular” arrays and arrays within data structures are now the same thing. This will mean that, in the future, features introduced to one array type will become available on the other one too. Array elements are “scalars” (i.e., data structures) and if they have drawing instructions, each point of the array is drawn according to them; they can be clicked on, etc., just like any other scalars. “Regular” arrays have points which are of a special, built-in template, “float”.</p>
<p>Drawing instructions now can use variable ranges for screen coordinates; for instance, specifying an offset of “a(0:10)(100:200)(0.2)” specifies that the member “a”, which should range from 0 to 10, should be graphed at locations ranging from 100 to 200 (relative to the scalar’s base location) and should have a “grain” of 0.2, i.e., steps of 2 pixels each.</p>
<p>Drawing instructions can be turned on and off, either globally (for all data of the given structure) or by a data field.</p>
<p>The “struct” object has an outlet to notify you when a datum is selected or deselected.</p>
<p>Graph-on-parent subpatches and abstractions no longer scale the GUI objects to fit the parent rectangle; instead you get a sub-rectangle in the subpatch, of the same size as the parent object, to place GUI objects in. GUI objects that don’t fit inside aren’t shown on the parent, and the parent objects no longer stretches itself to show things that wouldn’t otherwise fit. Older patches work as before until you try to edit them - at which point you have no choice but to use the new functionality.</p>
<p>The font size of a Graph-on-parent abstraction is that of the abstraction itself, not the calling patch.</p>
<p>Message boxes now take “addcomma” and similar messages.</p>
<p>A “list” object is provided for joining and splitting lists, and converting between lists and non-list messages.</p>
<p>Pd extension is now added automatically to files on Macintish when you do a “save as”. The tcl/tk version is updated to 8.4.5. This should run on OSX version 10.2 and later. Also on Mac, drag-and-drop startups read “libraries” (specified in “startup” dialog) before opening the file.</p>
<p>The “pointer” object has a method to rewind to the beginning of a list. A “sendwindow” message forwards any message to the window continuing the scalar currently pointed to.</p>
<p>Abstractions don’t produce visible windows, even if subwindows of the abstraction were visible when the abstraction was saved.</p>
<p>MIDI sysex messages should now work on all platforms.</p>
<p>Bug fixes:</p>
<p>sending lists to arrays now correctly interprets the first number of the list as the starting index (following values are then stored sequentially in the array.)</p>
<p>The rfft~ object’s imaginary part had the wrong sign. Also, the Nyquist bin is now supplied correctly.</p>
<p>Fixed problems writing aiff files using the writesf~ and soundfiler objects. Writesf, if sent an “open” while a file was previously being written, closes the previous file first.</p>
<p>Bug fix in number2 which sometimes crashed Pd.</p>
<p>Stale-pointer protection made more robust.</p>
<p>Some of Pd’s tcl/tk error messages have been tracked down, but probably not all of them yet.</p>
<p>“Find” crashed Pd when the found object was in a GOP.</p>
<p>Mouse motion over arrays no longer is quite so CPU-consuming (but is still somewhat so.)</p>
<p>samplerate~ now reflects up/downsampling.</p>
<p>Tilde objects in blocked, overlapped subpatches no longer adjust their internal sample rate to reflect the overlap.</p>
<p>Fixed a thread-safety problem in sys_microsleep().</p>
<h3 id="section-34" class="unnumbered">0.38.1</h3>
<p>Pd when deleting number boxes in certain situations.</p>
<h3 id="section-35" class="unnumbered">0.38.0</h3>
<p>The big change is queued graphics updates, which apply (so far) to tables and number/symbol boxes. The IEM GUIS aren’t enqueued yet. This along with a better graphics update buffering scheme makes Pd’s graphics run much better.</p>
<p>Support for cutting/copying/pasting text between boxes and between Pd and other applications.</p>
<p>Dialogs for setting and saving path, libs-to-load-on-startup, and some other things. This and the audio settings can be saved automatically to the appropriate repository (.pdsettings on linux; registry on MS windows; “Preferences” on Mac.)</p>
<p>“Print” printout goes to the Pd window by default. You can revert to the old (standard error) behavior with the “-stderr” startup flag.</p>
<p>The “gui” TK script can now start Pd up (previously Pd had to be started first.) This is needed for Pd to work as an “App” on Mac.</p>
<p>new filter objects: cpole~, fpole~, etc… these will get used in the upcoming Techniques chapter 8.</p>
<p>Objects whose creation failed get a distinctive outline; if they are already inside a patch they sprout inlets and outlets as necessary to preserve connections.</p>
<p>Filenames in the “search path”, etc., now may contain spaces, commas, and semicolons.</p>
<p>bug fix: click on miniaturized subpatch failed to “vis” it</p>
<p>bug fix: font size change crash reported by CK</p>
<p>Key bindings like control-Q now work even from within most dialogs.</p>
<p>The audio settings dialog now permits turning audio input and/or output off without forgetting how many channels it should be when on.</p>
<p>RME Hammerfall ALSA support from Winfried – but specify the number of channels correctly or else Pd crashes.</p>
<p>portaudio (e.g., Mac) audio support fixed for inchans != outchans, so the emi emagic can now be used 2-in. 6-out, for example.</p>
<p>(linux) The configure script can set the setuid flag on “make install”. The “-enable” flags to ./configure should now work correctly too.</p>
<p>atan2 had its inlets switched to conform to standard usage</p>
<h3 id="section-36" class="unnumbered">0.37.3</h3>
<p>Oops- added __i386__ macro to windows makefile so it would test for underflows correctly. This affects only Microsoft Windows; the other two platforms are fine as 0.37.2. Thanks to Thomas Musil…</p>
<h3 id="section-37" class="unnumbered">0.37.2</h3>
<p>fixed a bug in soundfile reading (soundfiles now default to wav better.)</p>
<p>fixed gfx update problem in hradio and vradio</p>
<p>minor changes to built-in Max import feature (but you should still use cyclone’s instead.)</p>
<p>colors for scalars fixed (probably never worked before!)</p>
<p>added a “set” message to the line object</p>
<p>aliased spaces to underscores in GUI labels so that at least they won’t destroy the object.</p>
<h3 id="section-38" class="unnumbered">0.37.1</h3>
<p>fixed the apple key on OSX so it does key accelerators</p>
<p>fixed bug in -inchannels/-outchannels arg parsing</p>
<p>major editions to the IEM GUIs to fix bugs in how “$” variables are handled. The code still isn’t pretty but hopefully at least works now.</p>
<p>bug fix in vd~ for very small delays</p>
<p>fixed MSW version not to make windows grow by 2 pixels on save/restore</p>
<p>added an “nrt” flag for OSX to defeat real-time prioritization (useful when running Gem.)</p>
<p>on some platforms, audio open failures are handled more gracefully.</p>
<p>added a “changelog” file in the source directory to document source-level changes.</p>
<h3 id="section-39" class="unnumbered">0.37</h3>
<p>Pd is finally fixed so that it can open and close audio and MIDI devices on-the-fly (previously it opened them once at startup and hogged them until Pd quit). Starting DSP causes audio devices to be opened, and stopping it closes them. There are dialog panels in the “Media” menu (which used to be called “Audio”) for choosing audio and MIDI settings. The “path” also can be changed on the fly via a dialog in the “File” menu.</p>
<p>A “vline” object acts like “line” but to sub-sample accuracy. See the audio example, C04.control.to.signal.pd (and/or chapter 3 of <a href="http://msp.ucsd.edu/techniques.htm">Theory and Techniques of Electronic Music</a>.</p>
<p>The block~/switch~ object now takes a “set” message to dynamically change block size, etc.</p>
<p>The makefilename object takes a “set” message to set the “pattern”. You can use this to kludge multiple substitutions (as shown in the help file).</p>
<p>The writesf~ object got an update and a better help window. It now should be able to write 32bit floating-point WAV soundfiles. The file’s sample rate is now set “correctly”.</p>
<p>Various improvements were made in audio I/O to improve stability and reduce latency.</p>
<p>Jack support should work for Mac OSX (it appears as a separate API). Linux is offering experimental portaudio V19 support (but Mac and Window/ASIO are still based on PA V18.)</p>
<p>The fiddle~ object (in extra) has an “npoints” method to set the analysis window size dynamically.</p>
<p>(windows) Pd is now distributed as a self-extracting archive.</p>
<p>(windows) url files in the help directories are opened correctly.</p>
<p>(Mac) the arrow keys should now be fixed.</p>
<p>(linux) The “configure” script should be better at finding TK in various distributions (debian users previously had to use a special configure script.)</p>
<p>(developers) Pd now exits cleanly from its main loop instead of bailing out. A mutex protects Pd’s data so it can be accessed from other threads. (Thomas Grill’s improvements.)</p>
<p>(developers) The “savefunction” and “dialog” widget behaviors were replaced by a better mechanism (class_setsavefn() and class_setpropertiesfn()). They’re declared in m_pd.h so you don’t have to include the (unstable) g_canvas.h to get them.</p>
<p>(developers) Better flag handling in the IEM GUIs (g_toggle.c, etc) should compile with fewer warnings and be more portable.</p>
<h3 id="test-1" class="unnumbered">0.37-test 1</h3>
<p>The MacOSX version now prioritizes itself effectively (thanks to gert@test.at (v93r)) via Adam Lindsay). Adam also made a proper MacOSX “package” for Pd.</p>
<p>A bug was fixed in readsf~/writesf~ (things were coming out in the wrong number of channels.)</p>
<p>A problem compiling Pd with TK8.4 (the latest version) was fixed.</p>
<p>Large numbers of GUI improvements by Adam Lindsay, especially relevant to Mac OSX.</p>
<p>For externs, the binary may now be included in a subdirectory of the same name (e.g., “choice/choice.pd_linux” and “choice\choice.dll”). So now you can pack multiple binaries for the same extern, along with the source, in one convenient place. (Note that “expr~” is an exception, since it goes by three different names, so this trick fails for that example.)</p>
<p>“Help” files renamed “help-xxx.pd”, so that help files are now possible for abstractions. The “help path” feature from CVS (I forgot who contributed that) is also included but should now not be needed: Pd remembers where it got externs and abstractions and looks back in the same directory for a help file. See the way “extras” is organized.</p>
<p>Pd refuses to connect signal outlets to non-signal inlets.</p>
<p>When you save any patch, Pd looks for all invocations of that patch as an abstraction and reloads them. This unfortunately has the side effect of making all the containing windows visible, but it’s better than nothing.</p>
<h3 id="section-40" class="unnumbered">0.36-1</h3>
<p>“print” now queries you for a file to save the postscript to.</p>
<p>“expr” brought up to date (0.4) – a bug was fixed involving expressions like “max($f1, 100)” which had erroneously output an integer.</p>
<p>a bug fix in the 4-point interpolation formula, which affects tabosc4~, tabread4~, tabread4, and vd~. These should have significantly lower distortion than before.</p>
<p>bug fix: vradio, hradio “send symbol” feature didn’t work</p>
<h3 id="section-41" class="unnumbered">0.36</h3>
<p>There’s now an “undo” for most editing operations. Undoing is only available in the window that was most recently edited. (One gotcha remains, that “stretching” (in the font menu) affects all windows and you can’t undo any but the last one it touched.) Also, there’s no “undo” for run-time operations, only editing ones. That might be worth thinking about.</p>
<p>Some bugs were fixed that affected “flipped” canvases (ones whose “properties show a positive”y&quot; increment per pixel.) Also, the coordinates are now saved and restored correctly. “text” objects (comments) now stick to the bottom of the window for flipped canvases.</p>
<p>Signal lines now show up fatter than control lines. (Now I have to go through the figures in the HTML doc again… drat)</p>
<p>“Classic” number boxes now can have labels and send/receive signals, which work in the same way as the IEMGUI controls do. I think “$1” style label/send/receive names work too. I fixed a related bug in the IEM code (typing at boxes sometimes crashed Pd).</p>
<p>“vdial” and “hdial” were renamed “vradio” and “hradio”, and fixed to output numbers, not lists, like the other GUIs. The old ones are still around for compatibility with old patches.</p>
<p>“Make install” should now actually make Pd before trying to install it.</p>
<p>“expr” is updated to Shahrokh’s 0.4test3 version (which I modified somewhat to get it to compile.)</p>
<p>The problem of CPU usage skyrocketing on underflows in P4s should be fixed.</p>
<p>Compiled “pdsend” and “pdreceive” for Windows.</p>
<p>“PD_VERSION” macro added to m_pd.h</p>
<h3 id="section-42" class="unnumbered">0.35</h3>
<p>An experimental new feature called graph-on-parent allows subpatches and abstractions to show GUI features; so, for instance, you can make an oscillator with a number box to control the frequency. This is described in section 2.7.2 of the HTML documentation and an example is shown in 7.stuff/synth1/.</p>
<p>Spaces are allowed in pathnames to Pd and to patches; however, the “path” variable still can’t have spaces. (You can address path directories using relative pathnames as in “../sound” (or ..\sound on Windows), even if there are spaces further “up” the path to the patch. See 3.7, “dealing with files.”</p>
<p>The soundfile reading routine (used in readsf~ and soundfiler) is much better at opening wav files with different header sizes and odd chunks. You can now read floating-point “wav” files – although you can’t write them yet.</p>
<p>Templates and data structures are extensively reworked. A “struct” object replaces “template”, so that you specify the name of the structure as the first argument to “struct” (previously it was derived from the window name.) You can now have multiple “structs” of the same name; the oldest one is the “real” one, but if you delete that, the structures are all conformed to the next-oldest one, and so on. You can alter the contents of a “struct” and all the associated data will be modified to fit the new structure definition. Data are persistent, i.e., saved with the containing patch. You can copy and paste data between patches. If you save data to a file explicitly, you can read it into another patch and the data are conformed automatically to the new data structures.</p>
<p>A new version of Thomas Musil’s GUI objects was merged in.</p>
<p>The testtone patch works for up to 6 channels of audio input and output.</p>
<p>Lots of improvements got made to audio I/O in general. In NT you may specify “-asio” to use ASIO drivers; see HTML documentation section 3.2. You may specify lists of audio input and output devices. In Linux, Pd will now attempt to open each /dev/dsp* only once, even if it’s requested for reading and writing.</p>
<p>The “extra” directory is now searched after the directories in the search path, not before (so now you can override objects like “fiddle~”).</p>
<p>A bug in paf~ is fixed.</p>
<p>In Linux, the “.pdrc” is now read before the command line arguments, so that command line arguments override the .pdrc (it was backwards before.)</p>
<p>In Linux, “help” now can invoke either mozilla or netscape to start up the HTML documentation. This doesn’t work in Windows or Mac land yet.</p>
<p>In Linux, the “-32bit” flag was added, which you must now use if running Guenter’s OSS RME Hammerfall driver. (This was necessary because OSS went and used the same “bit” for a different purpose, so that Pd tried to open some other cards in 32bit mode inappropriately.)</p>
<p>In Linux, MIDI is now opened “-NODELAY” … this makes the OSS Creative driver take MIDI input correctly which it didn’t before.</p>
<p>In MS windows, you can now use “readsf~/writesf~” for spooling sounds to and from disk.</p>
<p>MS Windows bug fixes: -nosound was ignored, and now works. Also, clicking to open abstractions, when they were already open anyway, used to lose the keyboard; this should be fixed now. Finally, “netreceive” didn’t work when running “-nogui”. This is fixed, and moreover, you should definitely include a netreceive object in any -nogui patch in MSW, otherwise it eats up all available CPU time gratuitously.</p>
<p>The outlet is removed from the “table” object.</p>
<p>In MS Windows, Pd now has “-resync” and “-noresync” flags so that you can specify how to deal with audio input and output blocksize nonsense in MMIO. If “resync” is on, whenever the audio input and output seem out of whack the audio driver resynchronizes all input and output devices; otherwise the situation is simply ignored. “Noresync” is probably best for consumer stereo cards (and is the default if you’re running only 2 channels in and out). If you’re running more than 2 channels in either direction, the default is “resync”.</p>
<p>In soundfiler’s read method, if you specify “-maxsize”, that implies “-resize” (as it ought to.)</p>
<p>You can use $1-style names for arrays and tables.</p>
<p>Pd will now refuse to make duplicate connections between objects.</p>
<p>Pd is (somewhat shakily) running on Macintosh OS/X. See section 3.4 of the HTML doc. For Macs with one-button mice, you can double-click in edit mode to simulate a right click. Unfortunately, the “alt” key doesn’t work yet.</p>
<p>In Linux, ALSA audio is now fixed to clip, not wrap around, on output overflows.</p>
<p>Various problems were fixed with objects changing size. Number boxes never wrap to two lines (as they used to), and lines are reconnected appropriately when objects are resized.</p>
<p>A function call is added to retrieve a unique event-dependent number, so that objects like “buddy” can be written.</p>
<p>All the “sound” command-line flags now have “audio” equivalents.</p>
<p>The “-listdev” flag now works on Mac and MSW/ASIO.</p>
<p>Help file updates for env~, route, and pointer</p>
<h3 id="section-43" class="unnumbered">0.34.3</h3>
<p>fixed a bug in “udp” netreceive that crashed pd</p>
<p>fixed a bug in tabosc4~ that caused gritty sound</p>
<p>changed “specfile” for RPM releases (thanks Fernando)</p>
<p>adopted Krzysztof’s glob_setfilename bug fix</p>
<p>bug fixes from “the joy of global variables” thread in Pd list</p>
<p>made a help window for “table”.</p>
<h3 id="section-44" class="unnumbered">0.34.2</h3>
<p>fixed “.pdrc” bug</p>
<p>added an experimental “pd restart-audio” feature for (new) Alsa</p>
<h3 id="section-45" class="unnumbered">0.34.1</h3>
<p>Bug fixes:</p>
<ol type="1">
<li>Closing a window with objects selected crashed Pd.</li>
<li>“find” when it opened a window to show the found object crashed Pd.</li>
<li>(Linux only) Oversized .pdrc files crashed pd…</li>
</ol>
<p>Also, I updated Thomas Musil’s IEM GUI objects and their help files.</p>
<h3 id="section-46" class="unnumbered">0.34</h3>
<p>NEW FEATURES:</p>
<p>I incorporated Thomas Musil’s GUI objects (slider, button, etc.) into the Pd release so Thomas won’t have to publish patches to Pd anymore. I didn’t take the graphical inlets and outlets for reasons explained elsewhere, but Thomas might decide to continue supplying them on a patch basis.</p>
<p>Many new examples were added to the “2.control” and especially “3.audio” example patches. A list of differences between Max/MSP and Pd now appears at the end of this section.</p>
<p>Finally, I fixed Pd to notice window iconification and suspend graphical updates for iconified windows.</p>
<p>Numbering of versions of Pd will now be as in “0.34.2” instead of “0.34PATCH2” which was confusing.</p>
<p>BUGS FIXED:</p>
<p>I incorporated Krzysztof Czaja’s menuclose bug fix in g_canvas.c.</p>
<p>(Linux) the configure script is more rational.</p>
<p>the qlist and pack objects were fixed to handle reentrancy correctly.</p>
<p>Pd now complains about running out of memory (before it dies.) I intend to provide advance warning and automatically back out of loading patches that would run out of memory, but that’s not in place yet.</p>
<p>Typing into a message box sometimes left you with lines from the output pointing to the wrong location. Fixed.</p>
<p>Reading of “wav” and nextstep soundfiles now handles the headers better.</p>
<h3 id="section-47" class="unnumbered">0.33</h3>
<p>AUDIO AND MIDI:</p>
<p>MIDI time jitter is reduced. Theoretically, it could now be as low as the audio blocksize (and so if you care about MIDI timing, keep your audio blocksize low.) If you run Pd with audio in stream mode or without audio at all, and perhaps in some cases in block more too (?), the controlling parameter for MIDI jitter is “-sleepgrain”, which specifies the interval of time Pd sleeps when it believes it’s idle.</p>
<p>You can now specify multiple MIDI input and output devices. For example, “pd -midiindev 3 -midioutdev 4,2” asks for the third MIDI input device and the fourth and second MIDI output device. The “channel message” midi objects in Pd such as notein or pgmout will take channels 1-16 to mean the first open MIDI port, 17-32 the second one, and so on. The midiin, sysexin, midiout objects give you a separate inlet to specify which of the open MIDI port numbers you want.</p>
<p>(Linux only) By default, Pd now reads and write audio in “block mode.” Previously you have to specify “-frags” and/or “-fragsize” to get this. As of this version you have to specify “-streammode” to get the opposite, streaming mode. This mode seems only to work with a small number of sound cards, notably Ensoniq ens1370 and ens1371.</p>
<p>(Linux only) Also, “-fragsize” is replaced with a more convenient “-blocksize” which you specify in sample frames. It defaults to 64 which is Pd’s audio computation block size but may be larger or smaller. Typically you would specify “-audiobuf” and “-blocksize” and Pd will compute “-frags” for you; but you can also specify “-frags” explicitly.</p>
<p>(Linux only) OSS and ALSA audio support are improved. You can now talk to RME9652 using Guenter’s OSS driver; this is different from the “-RME” support which uses Winfried’s older driver. Other multichannel OSS drivers might now work as well. Pd also seems to work with ALSA 0.9 Beta 4; I’ve tested this with Midiman Delta 66 and Soundblaster live. I plan to update the linux audio setup documentation accordingly.</p>
<p>NEW FEATURES:</p>
<p>I’ve put in Shahrokh’s new expr, expr~, and fexpr~ objects. The latter allows you to make expressions referring to prior input and output samples in case you’re interested in writing your own recursive filters, oscillators, or chaotic sound generators…</p>
<p>In support of expr, you can now use commas in “object” boxes; they just become symbols.</p>
<p>sqrt~ is fixed so that it apparently has 24-bit accurate mantissas. It turned out to be easier to just make it accurate than to confront the question of how a reduced-accuracy version should be named.</p>
<p>The bizarre framp~ object which does phase vocoder analysis got a help window. The phase vocoder example doesn’t use framp~ and I had forgotten what it did until Guenter dug it back up.</p>
<p>(Linux only) I finally got around to incorporating Guenter’s autoconf stuff, and learned about RPM. Major new Linux releases will probably be in .tar.gz and .rpm formats; “test” releases will probably just be in .tar.gz. I also fixed it so that the installation prefix is overridden if you invoke pd by its full pathname, so that you can still use compilations with installation prefixes before you actually install them.</p>
<p>(NT only) I added support for directX using the portaudio package by Ross Bencina and Phil Burk. I couldn’t discover any way this would ever outperform the old “multimedia” API Pd uses. So the release contains the sources, but you have to recompile Pd to use directX. Use “makefile.nt.portaudio”. Only 1 or 2 channels of audio are supported. The interesting thing is that the same code will run on Macintosh. There are a couple of other obstacles to a MacOS port of Pd though; it’s hard to predict when this will be feasible.</p>
<p>BUG FIXES:</p>
<p>“drawnumber” was broken in 0.32 – fixed.</p>
<p>new arrays in 0.32p6 got ill-fitting graphs – fixed.</p>
<h3 id="patch-6" class="unnumbered">0.32 PATCH 6</h3>
<p>Got array and graph dialogs to behave better when there are more than one.</p>
<p>put in mtof~, etc.</p>
<p>made Pd search the “extra” directory without having to specify it in “path.”</p>
<p>bug fix in exporting patches to Max</p>
<h3 id="patch-5" class="unnumbered">0.32 PATCH 5</h3>
<p>Reversed the order of these release notes so that the newest appear first.</p>
<p>Arrays can save their content with containing patch; the properties dialog selects this. The dialog shows up when you create a new array from the menu, and allows you to set the name and size. Only floating point arrays can be created and edited this way.</p>
<p>Bug fix: the figures in the NT web doc were garbage.</p>
<p>Bug fix: large tables (&gt; 800 pixels and points) no longer crash the GUI. A related problem remains; large arrays are truncated to either 1000 points or 1000 pixels.</p>
<p>Bug fix: doing “save as” on an instantiated abstraction no longer sets the window title.</p>
<p>in linux, a couple of status messages on opening /dev/dsp only appear now if Pd is run “-verbose”.</p>
<h3 id="patch-2-3-4" class="unnumbered">0.32 PATCH 2, 3, 4</h3>
<p>Hassled more with font size differences between NT and Linux, and updated many help files. Minor bug fixes here and there.</p>
<p>the table object now takes a second argument to set size in points.</p>
<p>Improved underflow protection in some DSP objects.</p>
<p>pointer now has a “vnext” traversal method which goes forward to the next SELECTED object.</p>
<p>improvements to throw~ (it now sums) and receive~ fixed to be settable.</p>
<p>bug fix in which RME driver always thought sample rate was 44100.</p>
<h3 id="patch-1" class="unnumbered">0.32 PATCH 1</h3>
<p>bug fixes (bugs flagged by mik): vcf~ help window crashed; writesf~ only wrote 1 channel soundfiles; “table” object didn’t open when clicked on;</p>
<p>new object: tabosc4~ – finally, a real wavetable oscillator for Pd.</p>
<p>much work on “data” editing; go to 7.stuff/data-structures, open patches 5 and 7, and try clicking on things. Alt clicks delete or add points; regular clicks drag values around. The cursor changes to show you what will happen if you click.</p>
<h3 id="section-48" class="unnumbered">0.32</h3>
<p><strong>New objects:</strong></p>
<p>midiin, sysexin, midiout. (I don’t think MIDI sysex is working in Windows yet though.)</p>
<p>threshold~ as in Jmax, triggers from audio level.</p>
<p>value as in Max and Jmax.</p>
<p>writesf as in Jmax.</p>
<p><strong>New startup flags:</strong></p>
<p>-sleepgrain: if you aren’t using audio I/O, this can reduce time jitter in MIDI I/O. Otherwise, MIDI I/O jitter is limited by the audio buffer size.</p>
<p>-noloadbang: cancels loadbangs.</p>
<p>-nogui: suppress starting the GUI. You can then still talk to Pd using, perhaps among other possibilities, the new network connection programs now included in the release.</p>
<p>-guicmd: lets you specify the command string Pd calls to start the GUI, in case you’ve written your own GUI to replace the TK one Pd comes with.</p>
<p>-send: after loading all the patches specified in the command line, you can specify “startup” messages to send. For example, if you want to use Pd just to play 50-channel soundfiles from a shell, this is how you can specify the soundfile name on the command line.</p>
<p><strong>bug fixes.</strong></p>
<p>A readsf~ problem got fixed.</p>
<p>hitting the tab key used to cause Pd windows to relinquish the keyboard.</p>
<p>The $0 feature appears now to work.</p>
<p>Inlets and outlets of subpatches sometimes got out of left-to-right order.</p>
<p>Scrollbars are less out of whack than they were before.</p>
<p>Pd now knows to de-iconify windows if you “vis” them from the parent.</p>
<p><strong>in general:</strong></p>
<p>In Linux the treatment of MIDI input is now much more efficient. Also, bugs were fixed in notein and (for SGI) bendin.</p>
<p>You can “select all” from the Edit menu.</p>
<p>standalone programs “pd-send” and “pd-receive” are provided that can send messages to Pd or receive messages from Pd via the netsend~ and netreceive~ objects. This should allow you to interface a wide variety of other programs with Pd either on the same machine or over the network. Also you should be able to hack the code into your own programs to make them interoperate with Pd and/or each other. The underlying protocol is called FUDI.</p>
<p>“Properties” for scalars, graphs, and number boxes: left click on them. In particular, number boxes can have fixed widths and finite ranges; if you make them one character wide they act as toggles. Later you’ll be able to configure them as sliders.</p>
<p>As to scalars, the properties dialog lets you edit the data in the raw. Don’t try to edit the template though; you can’t.</p>
<p>You can now type into a “pd” object to change its name without losing the contents.</p>
<p>An experimental “scalar” _text_ object now allows abstractions to draw primitive control panels on their parents when you invoke them, as if they were Moog or Buchla modules. See the “7.stuff/data” examples.</p>
<p>New help windows for the “data” classes (pointer, append, template, etc.) and for send/receive which somehow I had neglected.</p>
<p>When you hit “copy” with nothing selected, the copy buffer used to be cleared. This is fixed to do nothing.</p>
<h3 id="section-49" class="unnumbered">0.31</h3>
<p>ALSA support in Linux has been completely overhauled. It now works with Midiman (up to 10 in/12 out!) and es1370. There are problems with SBLive under ALSA but it works in OSS emulation with a “-frags” setting. See the “getting started” documentation.</p>
<p>In NT, the default is now “noresync” if you’re running stereo. You can override this with the “-resync” flag. If you’re running more than 2 channels it’s the opposite (as it was before.)</p>
<p>“symbol” boxes now display symbols and let you type them in.</p>
<p>There was a bug when you renamed a patch from outside Pd; the old filename still showed in the title bar (and there were other bad side effects.) Fixed.</p>
<p>Protection was added against patches opening themselves as abstractions.</p>
<p>The “route” object’s handling of leading symbols was improved. I’m not sure whether it’s Max compatible or not.</p>
<p>You can draw into arrays with the mouse, at least in the case where there’s at least one pixel per point. (I’m not sure if the other case even makes sense.)</p>
<p>Abstractions display their “$1”, etc., arguments in the window title bar.</p>
<p>A “sort” method was added for lists to make them easier to use as sequencers.</p>
<p>The “save as” dialog makes a more reasonable choice of start-up directory.</p>
<p>“Trigger i” is now disallowed (it used to crash Pd.)</p>
<p>Getbytes and resizebytes now zero out new memory.</p>
<p>A memory leak reported by Hannes has been partly, hopefully mostly, fixed.</p>
<p>The “signal_free 2” bug reported by Fogar is fixed.</p>
<p>New graphs now reliably avoid using already-taken “graph%d” names.</p>
<p>The old bug which showed up as “.xxxxxxxxx: no such object” is fixed.</p>
<p>The FFT examples have been reworked and the “pique” and “shift” objects are moved to “extra”.</p>
<h3 id="section-50" class="unnumbered">0.30</h3>
<p>in Linux, you can get Pd to promote itself to “real time” priority. A “watchdog” process protects you from having Pd lock your machine up. You must request real time by running “pd -rt” or “pd -realtime”. You must either be superuser or make Pd a root-owned SETUID program (chown root …/pd/bin/pd; chmod 4755 …/pd/bin/pd). For security reasons, Pd relinquishes root privilege immediately after setting its priority, before loading any patches or externs.</p>
<p>Protection was added against message loops.</p>
<p>loadbang was fixed so that loadbangs in abstractions go off before loadbangs in the owner patch. Within each patch, loadbangs go off first in subpatches.</p>
<p>new object: tabplay~, a non-interpolating sample reader.</p>
<p>new objects (in “extra” library): loop~; rev1~.</p>
<p>The “toys” library was renamed “extra” and incorporated in the Pd release.</p>
<p>In Linux, timeouts were added to the driver opening and closing code (which used to hang under some conditions.)</p>
<p>the “field” object was replaced by “template”; see “data.structures” examples in 7.stuff. Data lists can be read from and written to files now.</p>
<p>You can invoke an external object by pathname, as in “../../extra/loop~”.</p>
<p>hip~, etc. should no longer get stuck when they get a NAN on input.</p>
<p>a bug was fixed in expanding symbols such as “$1-foo”.</p>
<h3 id="section-51" class="unnumbered">0.29</h3>
<p>readsf~ - a MAX/FTS style soundfile player, which reads multichannel soundfiles in wave, aiff, or next formats. The files must be 16 or 24 bit fixed point or 32 bit floating point (only nextstep headers understand the latter.) You can also override the header. A “skip” flag lets you read starting anywhere in the file. (Sorry: linux only for now; I can’t find Posix threads packages for the other platforms.)</p>
<p>soundfiler - support for reading and writing soundfiles (wave, aiff, nextstep) to and from arrays. Multichannel soundfiles can be read into or written from several arrays at once. When reading you can ask that the tables be automatically resized; in any event the object obligingly outputs the number of samples actually read. When writing you can specify a sub-segment of the arrays, and/or request that the soundfile’s maximum amplitude be normalized to one.</p>
<p>tabplay~ - a non-interpolating sample player</p>
<p>Garry Kling reports having compiled Pd for “yellowdog” linux on Macintosh computers. One “fix” has been made to s_linux.c to facilitate this. I don’t have access to a Mac running linux at the moment so I can’t verify whether any particular release of mine actually works there.</p>
<p>Signal objects now automatically convert scalars to vectors, so that you can just run a number box into a signal input. One caveat is that the binops “+~”, “-~”, “*~”, “/~”, “max~”, “min~” run slightly faster if you give them an argument to tell them that their right inlet will be scalar; so the construction “+~ 0” is still meaningful. This will get fixed at some later date…</p>
<p>Font sizes work in what I hope will be a more machine-portable way. On any machine, the point sizes 8, 10, 12, 14, 16, 24 are DEFINED to be the largest fonts Pd can find that don’t exceed their size on my linux machine. This way I can write patches that everyone else can read, and others will at least have fewer portability problems than before. The downside is that your old patches may appear with a different type size than you want; use the “font” menu item to fix them.</p>
<p>The OSS support no longer asks the audio driver whether full duplex is needed; it just tries to open it. Apparently some drivers (such as ALSA’s OSS emulation) might do full duplex but not implement the call Pd used to query for it.</p>
<p>You can give “-nomidi” as a flag (previously you had to type “-nomidiin -nomidiout”.)</p>
<p>A GUI bug reported by Iain Mott was fixed.</p>
<p>You can now type symbols such as “$3-poodle” and the “$3” portion gets expanded properly. Someone was also asking about the FTS-style #0 feature, but I couldn’t figure out how to reconcile it with Pd’s usage of “$” for “#” in abstractions. So I’m still searching for a good way to provide local symbols.</p>
<p>the GUI now protects itself from “\”, “{” and “}” characters by dropping them. I wonder how many NT users have crashed Pd trying to type in filenames with backslashes…</p>
<p>samphold_set and tabwrite_stop methods added. There turned out to be no help window for samphold~ so one was supplied.</p>
<h3 id="section-52" class="unnumbered">0.28</h3>
<p>Version 0.28 has a primitive in-box text editor… about time!</p>
<p>the “front panel” now gives you information on audio levels and sync errors.</p>
<p>Message boxes flash, sort of, when you click them.</p>
<p>Support has been added for RME 9652 soundcards; see the Linux soundcard section of the documentation. Support files for RME and PCI128 (Ensoniq es1370) cards are released separately from Pd.</p>
<p>The delete and backspace keys clear the current selection. There is unfortunately no “undo” though; I’m not sure this is a good thing to have put in.</p>
<p>The “until” object has a “float” method which limits the number of bangs it will output.</p>
<p>The audio setup is better documented for NT and Linux.</p>
<p>The externs in 4.fft and 6.externs got recompiled and tested.</p>
<p>BUG FIX: the “read16” message to tables was broken on NT and is now fixed.</p>
<p>BUG FIX: In Linux, starting Pd up sometimes changed the audio mixer setting.</p>
<p>BUG FIX: sending “floats” to inlets expecting lists now works correctly.</p>
<p>BUG FIX: “route” on symbols now deals better with symbols, floats and lists.</p>
<h3 id="section-53" class="unnumbered">0.27</h3>
<p>The main new feature is the “find” menu stuff. You can search for boxes containing specified atoms, including semicolons or commas. Most errors are now trackable, allowing you to “find last error”. Look in the “Find” menu.</p>
<p>New objects written: change, max, max~, min, min~, and swap.</p>
<p>I looked in 0.INTRO.txt in 5.reference, and found that the objects bag, cputime, realtime, pipe, symbol, poly, and bang were missing.</p>
<p>Five or six bug fixes.</p>
<p>Some audio problems in 0.25 were addresses. In Linux, audio drivers that don’t support the GETISPACE/GETOSPACE ioctl calls can be called using the (inferior) “-frags/-fragsize” mechanism. If you specify either a “-frags” or a “-fragsize” option, the GETIOSPACE calls are cancelled.</p>
<p>Under NT, for some audio drivers the 0.26 release gave a constant stream of “resync” events. I don’t know what causes this but I added a “-noresync” option which simply never resyncs at all.</p>
<h3 id="section-54" class="unnumbered">0.26</h3>
<p>phasor~ and osc~ can be configured to take floating point messages to set their frequencies, as an alternative to having an input signal to do the same. Also, +~, etc, can take floating point arguments (and messages) to add or multiply scalars. The +~, etc, loops were unrolled to make them run faster.</p>
<p>A switch~ object is provided to let you switch sub-patches on and off. The inlet~ and outlet~ objects were re-written to avoid adding any overhead when moving signals in or out of sub patches.</p>
<p>In Linux at least, the audio latency is much reduced. It’s possible to poll for audio I/O lateness errors by sending “pd audiostatus”.</p>
<p>When reading a sample using tabread4~, you can switch between sample tables using the “set” message.</p>
<p>A new “textfile” object is like qlist but more flexible.</p>
<p>Many help windows got updated (but at least a dozen more need work urgently).</p>
<p>A dsp_addv function was added to allow variable-length DSP calls (for writers of tilde externs.)</p>
<p>It’s possible for a tilde extern to have a name ending in “tilde” now. Name the setup routine “foo_tilde” for “foo~”, etc.</p>
<p>The dac~ object was fixed to clip its output when out of range (before it wrapped around.)</p>
<p>A first line of protection was added against getting numerical underflow in delay feedback loops. Before, when a reverberator tailed out there was a sudden jump in CPU usage because the numerical underflows would trap to the kernel. Now, if any delwrite~ is given a value less than 1e-20 or so, it records a true zero to avoid this.</p>
<p>Signal division checks for divide by zero.</p>
<p>A “Font bomb” feature is provided for resizing fonts and stretching and contracting patches to fit.</p>
<p>Pds now bind themselves to the symbol pd-&lt;window-name).</p>
<p>IN Linux, if Pd is called as root it tries to promote its run-time priority. You can make pd a setuid root owned program if you want this behavior for non-root users who start pd. (Don’t make pd-gui setuid though. That would make a security hole in your system.)</p>
<p>The Pd commend line can take multiple “open” arguments.</p>
<p>The file search path feature was fixed and generalized.</p>
<p>Alt-clicking a table gives you a dialog to set its x and y range and pixel size.</p>
<h3 id="section-55" class="unnumbered">0.25</h3>
<p>Lots of minor, under-the-hood improvements and bug fixes…</p>
<p>The Netsend/netreceive objects were improved; you can now choose between UDP and TCP and there’s an outlet to tell you whether they’re connected.</p>
<p>You can now alt click on an object to get its help window (and the help windows got a fair amount of work.)</p>
<p>multichannel audio I/O – you can get up to 8 audio channels in and out. On SGI this is done correctly; on NT it’s done using sequential “stereo” devices. I’m not sure of the status of multichannel in linux…</p>
<p>The “text” window got new accelerators and a bigger font size</p>
<p>there are 3 “tool” patches in 7.stuff: filtering, pvoc, ring mod.</p>
<p>In NT, command-line backslashes are converted to forward slashes.</p>
<p>There’s a load measurement tool in the “help” menu.</p>
<p>The SGI version contains an n32 binary (look at the “bin” directory).</p>
<h3 id="section-56" class="unnumbered">0.24</h3>
<p>new objects:</p>
<ul>
<li>bang - convert any message to a “bang”</li>
<li>qlist - message sequencer</li>
<li>textfile - file to message converter</li>
<li>makefilename - format a name with a variable field</li>
<li>openpanel - “Open” dialog</li>
<li>savepanel - “Save as” dialog</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Fixed a bug in “const” message to arrays</li>
<li>“exp” was broken on NT, now fixed</li>
<li>phase vocoder example improved</li>
<li>“read” message to arrays now zero out unread samples</li>
<li>bug fix in “key” object</li>
<li>bug fix in ifft~ (thanks to Peter Lunden)</li>
<li>“print” object fixed to distinguish between lists starting with symbols and other messages</li>
<li>polygon, curve, fpolygon, fcurve renamed to fix name clash with Gem</li>
<li>improved “new object” placement on screen</li>
<li>fixed help dialog to remember previous directory (thanks to Harry Castle)</li>
<li>heterogeneous lists</li>
</ul>
<p>Arrays can be written to and read from text files or from 16-bit binary files. See ../2.starter/2G for an overview.</p>
<p>Guenter Geiger has contributed a Max-style “table” object which creates an “array” object in a subwindow.</p>
<p>Guenter has also put in a “search path” feature for externs, abstractions, etc.</p>
<p>The Help menu got reworked.</p>
<p>Select and Route were extended to work Zack-style with symbols.</p>
<p>“random” takes seeds now (see the “help” window)</p>
<p>Some more work on graphical lists; you can see the current state in ../7.stuff/data-structures. It’s still nascent.</p>
<h3 id="section-57" class="unnumbered">0.23</h3>
<p>A first cut at the “pure data” feature is now included. See section 6 of the documentation for a quick introduction to it; see also patches 12 and 14 in the FFT examples.</p>
<p>The documentation has been reorganized. The most interesting new features are:</p>
<ul>
<li>some new “tutorial” patches</li>
<li>15 “fft” examples</li>
<li>improved help navigation</li>
</ul>
<p>more bug fixes:</p>
<ul>
<li>titles on abstractions no longer saved inside file</li>
<li>left-to-right sorting of inlets/outlets now seems to work</li>
<li>nt audio setup got confused when driver couldn’t do full duplex</li>
<li>opening window with audio on is now fixed</li>
<li>deleting inlets/outlets deletes connections first (used to crash)</li>
<li>1e20 parsed correctly now</li>
<li>osc1~ fixed and optimized</li>
<li>resizing arrays with DSP on used to crash; now fixed</li>
<li>pasting now adds to the end of the list (used to add to beginning)</li>
<li>clicking now selects the most recent object when two or more overlap</li>
<li>Pd’s “open” and “help” dialogs now maintain separate paths</li>
</ul>
<p>The phasor~ object’s “float” method has been REMOVED – use the right-hand inlet to set the internal phase. This is so that I can later fix all tilde objects to convert messages to signals automatically at all signal inputs.</p>
<h3 id="section-58" class="unnumbered">0.22</h3>
<p>bug fixes - parsing 1e+006 gave symbol (now float) - “.” parsed as number, should be symbol - change GUI polling loop to TK event dispatch (unix only) - improved “tidy up” feature - size check added to text boxes (used to crash; still not correct.) - occasional bug sending text with CRs to tk - binop startup bug - key accelerators for creators wrong - ftom range to 1500 - bug in pack, unpack - windows restore bigger than saved</p>
<p>Nt-specific bug fixes: - getsockopt for netreceive fails. Just omitted it for NT. - put tcl dlls in tcl bin, not pd bin - archive tcl subsystem for easier version updates - fix README accordingly - deal with bell sound - turn on optimization - looked for audio timeout bug but couldn’t find it.</p>
<h3 id="section-59" class="unnumbered">0.21</h3>
<p>bug fixes:</p>
<p>table size change with DSP on: It used to crash Pd to resize an array when DSP was turned on. This is now fixed.</p>
<p>deselect all when locking. When you lock a patch the selection is cleared.</p>
<p>unlock when pasting. .. and if you paste into a pastch, it’s unlocked.</p>
<p>lost keyboard events. Version 0.20 lost keyboard events and forgot window size changes. This should now be fixed.</p>
<p>subpatches came up in wrong font size</p>
<p>dirty flag on window title bar fixed</p>
<p>improvement to netreceive suggested by Mark Danks</p>
<p>style notes fleshed out as suggested by Larry Troxler</p>
<p>fixed Bill Kleinsasser’s bug (short and long array in same graph)</p>
<p>new features:</p>
<p>phase setting for phasor~</p>
<p>fft objects. Also, block~, for specifying block sizes and overlaps for FFTs.</p>
<p>canvas_makefilename() (used, e.g., by array_read and write)</p>
<p>“stuff” directory with examples of real Pd applications.</p>
<h3 id="section-60" class="unnumbered">0.20</h3>
<p>In NT, the 0.19 release turned out not to contain all the files needed to make TCL run. This problem should now be fixed.</p>
<p>Also, the array_write routine was fixed.</p>
<h3 id="section-61" class="unnumbered">0.19</h3>
<p>notable new objects:</p>
<ul>
<li>vcf~, a bandpass filter with a signal input for center frequency.</li>
<li>delread, delwrite, vd, as in ISPW Max.</li>
<li>various math and midi stuff</li>
<li><p>catch~, throw~, send~, receive~ for nonlocal signal connections</p></li>
<li><p>an experimental facility for array of floats is included. You can make a new array (from the “put” menu) which will be given a name such as “array1”. You can then send it “read &lt;file&gt;”, “write &lt;file&gt;”, “resize &lt;N&gt;”, and “print” messages. File reading and writing is in ascii. “resize” changes the size of the array, and “print” prints its vital signs. You can then use “tabread4~” to do a 4-point interpolating table lookup, and tabwrite~ to write audio samples into the table.</p></li>
</ul>
<p>Numbers now default to floating point, although certain objects like “spigot” and “metro” still convert their boolean inputs to integers so that 0.5 is “false.” This behavior will probably change later. The “div” and “mod” objects are introduced for explicit integer division and remainder.</p>
<p>Number boxes drag in integer increments, or in hundredths if you hold the “shift” key down when you click.</p>
<p>Pd documents now save their font sizes. The font size is global to an entire document. New documents come up in the font size Pd was started in (using the “-font” flag.) If you want to change the font size of an existing document, use a text editor; the font size is the last argument on the first line. 8, 10, 12, 14, 16, 18, and 24 are supported.</p>
<p>The abbreviations “t,” “f,” and “i” stand for “trigger,”, “float”, and “int.”</p>
<p>Inlets and outlets of subpatches are now sorted correctly; although there is still a problem deleting inlets/outlets which have connections.</p>
<p>The size and screen location of Pd documents is saved correctly.</p>
<p>Tilde objects now work in “subpages” although there is no way to send signals through their inlets and outlets; use throw~/catch~ or send~/receive~.</p>
<p>On NT, the default is to open both audio output and input (this used not to work.) The situation is still shaky; audio seems to hang up sporadically on my machine; but I seem to have installed my audio driver wrong anyway. I had to set a huge output FIFO (1/3 sec or so!) to get it to work at all. You can type “pd -dac”, “pd -adc”, or “pd -nosound” to get output only, input only, or no audio at all. NT’s MIDI input and output are supported, but on my machine MIDI output is flaky. I’m curious how all this will work on other machines…</p>
<p>The list of classes is now:</p>
<p>GENERAL: field inlet outlet print int float send receive select route pack unpack trigger spigot moses delay metro line timer makenote stripnote random loadbang serial get netsend netreceive</p>
<p>MATH: + - * / == != &gt; &lt; &gt;= &lt;= &amp; &amp;&amp; | || % mod div sin cos tan atan atan2 sqrt log exp abs mtof ftom powtodb rmstodb dbtopow dbtorms</p>
<p>MIDI: notein ctlin pgmin bendin touchin polytouchin noteout ctlout pgmout bendout touchout polytouchout</p>
<p>SIGNAL: dac~ adc~ sig~ line~ snapshot~ +~ -~ *~ /~ phasor~ cos~ vcf~ noise~ env~ hip~ lop~ bp~ biquad~ samphold~ clip~ rsqrt~ sqrt~ wrap~ print~ scope~ tabwrite~ tabread4~ send~ receive~ catch~ throw~ delwrite~ delread~ vd~</p>
<h3 id="section-62" class="unnumbered">0.18</h3>
<p>Release notes now describe the three platforms Pd runs on: IRIX and NT (maintained at UCSD) and LINUX, maintained by Guenter Geiger.</p>
<p>menu “close” on a dirty document now checks if you really want to close without saving (although “quit” will still exit Pd without verification.)</p>
<p>Got rid of “dll” error printout when loading abstractions</p>
<h3 id="section-63" class="unnumbered">0.12 - 0.17</h3>
<p>got Pd running under NT, although driver problems remain. Gem is also distributed for both platforms.</p>
<h3 id="section-64" class="unnumbered">0.11</h3>
<p>Here’s a list of all the objects in this release:</p>
<p>general: print int float send receive select pack unpack trigger spigot</p>
<p>time handling: delay metro line timer</p>
<p>arithmetic: + + - - * * / / == == != != &gt; &gt; &lt; &lt; &gt;= &gt;= &lt;= &lt;= &amp; &amp;&amp; | || %</p>
<p>midi: notein noteout makenote stripnote</p>
<p>other: random get</p>
<p>signals: dac~ adc~ sig~ line~ snapshot~ +~ *~</p>
<p>signal oscillators: phasor~ cos~</p>
<p>signal filters: env~ hip~</p>
<p>signal debugging : print~ scope~</p>
<p>“spigot” replaces “gate” but has the inputs reversed.</p>
<h3 id="section-65" class="unnumbered">0.10</h3>
<p>Many bug fixes. This was the first pre-release to be put on the FTP site.</p>
<h3 id="section-66" class="unnumbered">0.09</h3>
<p>set up the “Help” menu</p>
<p>Bug in DSP sorting fixed</p>
<p>“Notein” and “noteout” objects</p>
<p>Comments from the Put menu say “comment” (they were invisible before)</p>
<p>The scheduler deals better when sound I/O malfunctions</p>
<h3 id="section-67" class="unnumbered">0.08</h3>
<p>metro bug</p>
<p>scrollbars</p>
<p>scheduler bug</p>
<p>text box wraparound at 80 chars.</p>
<p>fixed boxes to reconnect on retype</p>
<h3 id="section-68" class="unnumbered">0.07</h3>
<p>made an adc~ object</p>
<h3 id="section-69" class="unnumbered">0.06</h3>
<p>fixed two bugs in DSP sorting</p>
<p>added DSP on/off gui</p>
<p>added lock/unlock and changed the cursor behavior</p>
<p>fixed -font flag to set font pointsize</p>
<h3 id="section-70" class="unnumbered">0.05</h3>
<p>added scope~, which is just a stopgap until real sound editing comes up.</p>
<p>improved the open panel slightly.</p>
<p>added atoms (int only).</p>
<p>reworked text editing to reside in Pd, not Pd-gui.</p>
<p>included a dbx-debuggable Pd in the distribution. I haven’t yet figured out how to get dbx to work with externs though.</p>
<h3 id="section-71" class="unnumbered">0.04</h3>
<p>fixed “cut” which crashed 0.03 if DSP was running. added clip~, print~, line~, snapshot~.</p>
<h3 id="section-72" class="unnumbered">0.03</h3>
<p>“pd dsp 1”, “pd dsp 0” messages added. If you edit a patch with DSP on, PD resorts the DSP network as needed. Unconnected and multiple signal inlets are allowed.</p>
<h3 id="section-73" class="unnumbered">0.02</h3>
<p>A DSP network mechanism has been added. DSP objects are: sig~, +~, *~, phasor~, cos~.</p>
<p>Loading of externs is provided (although there is no search path mechanism so the extern has to be in the patch’s current directory.) Look in pd/externs for an example.</p>
<h3 id="section-74" class="unnumbered">0.01</h3>
<p>This first release serves mostly to test the “release” mechanism. A Pd “canvas” object is provided which does both graphing and patch editing. The editing features apply only to the Max-like part; the graphs have to be edited into a Pd file via text editor.</p>
<p>Four menu items (in the “put” menu) create the four kinds of “patchable” objects; they can be dragged and connected as in Max; to break a connection, just click on it (the cursor becomes a turkey to indicate this.) Cut, paste, and duplicate seem to work, and a “Pd” class offers subwindows.</p>
<p>The following max-like objects are included: print; +, *, -, /, ==, !=, &gt;, &lt;, &gt;=, &lt;=, &amp;, |, &amp;&amp;, ||, %; int, float, pack, unpack, trigger; delay, metro, timer; send, receive.</p>
<h2 id="known-bugs"><span class="header-section-number">5.2</span> Known Bugs</h2>
<p>These are now tracked on the <a href="https://sourceforge.net/projects/pure-data/">Pd Sourceforge</a> project page.</p>
<h2 id="differences-from-maxmsp"><span class="header-section-number">5.3</span> Differences From Max/MSP</h2>
<p>It wasn’t anyone’s intention to make Pd a Max/MSP clone, but on the other hand, if there’s no reason for a feature to appear differently in Pd than in Max/MSP, the choices in Pd tend to hew to those in Max/MSP. Moreover, some effort has been undertaken (but more is needed) to make the two interoperable.</p>
<p>You can use Pd to import and export patches to Max/MSP; just save as text to a file with extension “.pat”, and then open in the other program. You’ll at least get something. If you stick to common or commonizable features you can actually develop patches for both platforms. Pd importing of Max patches works best if you use the Pd Extended package; there are many more compatible objects.</p>
<p>When specific objects exist on one platform and not on the other, it’s often possible to make abstractions to imitate the missing objects, in a kind of personalized compatibility library.</p>
<p>There are, however, differences in semantics you’ll want to know about; a partial list follows.</p>
<p><strong>abstraction arguments.</strong> In Pd you can edit instantiations of abstractions and save the result back to the file of the abstraction. This isn’t possible in Max, because the instantiations are different from the abstraction itself in that “#1”, etc., are replaced by the instantiation arguments. In Pd, these arguments appear as “$1”, etc, and are translated at a slightly later stage of the instantiation process so that you still see them as “$” variables in the instantiation. (See <a href="#abstractions">Abstractions</a>.)</p>
<p>In Pd, to make current all instantiations of the abstraction, either delete and recreate them or close and open the patch; this is done automatically in Max/MSP.</p>
<p>In Pd, if you select “save” while in a subpatch, the parent is saved. In Max/MSP, if you do this a dialogue box comes up asking if you want to save the subpatch as a separate file. (if you want to save a subpatch to a file in Pd, you have to copy and paste the contents to a new document.</p>
<p>In Pd, inlets and outlets are ordinary text objects; in Max/MSP they’re “gui” objects from the palette.</p>
<p>In Max/MSP, if an object’s outlet is connected to several destinations, corresponding messages are always sent in right-to-left screen order. In Pd, the messages are sent in the order you made the connections in. In either case, in situations where you care about the order it’s appropriate to use a “trigger” object to specify.</p>
<p>In Pd, there’s no “gate”; instead it’s “spigot” with the inlets in the opposite, more natural order.</p>
<p>Switching subsets of the DSP patch on and off is done in completely different ways in Pd and Max/MSP, and block sizes are handled differently as well.</p>
<p>Max offers many “GUI” objects such as sliders, dials, VU meters, piano keyboards, even “bpatchers.” Until version 0.34, the only two in Pd were the number box and graphical arrays. Starting in version 0.34, Pd incorporates Thomas Musil’s GUI objects: sliders, switches, and so on. (Thanks Thomas!) Beyond this essential collection of GUI objects, it’s unlikely you’ll ever find any commonality between the two. Also, as of 0.34, importing and exporting to Max doesn’t know about the Musil objects; I’ll try to get that fixed for 0.35.</p>
<p>In Pd there’s no “preset” object (I now think it’s basically a bad idea) and you have to use explicit sends and receives to restore values to number boxes. Then just make a “message” box to re-send the values you want.</p>
<p>In Macintosh land, instead of getting tabosc4~ and arrays, you get cycle~ and buffer~. The only gotcha is that you probably can’t draw in buffer~ with the mouse as you can with arrays, but at least it’s possible to make a patch that copies a “table” into a “buffer~”.</p>
<p>The “bpatcher” feature in Max has a correlate, “graph on parent” subpatches, in Pd; however, Pd’s version is quite different from Max’s.</p>
</body>
</html>
